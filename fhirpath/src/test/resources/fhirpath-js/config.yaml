# This file documents exclusions from the test cases along with justification of why the tests are
# excluded and links to related issues.
excludeSet:
  - title: Global exclusions
    glob: "*.yaml"
    exclude:
      - title: Unsupported resources
        type: feature
        id: "#2418"
        expression:
          - "^StructureDefinition"
      - title: Parse error
        type: wontfix
        comment: |
          The test case is not valid FHIRPath syntax, it contains a parse error.
        any:
          - "@T17:00-05:00 < timeWithT.toTime()"
          - "@T17:00-05:00 > timeWithT.toTime()"
          - "@T17:00-05:00 < timeWithOutT.toTime()"
          - "@T17:00-05:00 > timeWithOutT.toTime()"
          - "('a'|'b'|'c').join(',')"
          - "('a'|'b'|'c').join()"
          - "time.toTime() = @T19:15-05:00"
          - "time.toTime() = @T18:15-05:00"
          - "time.toTime() != @T18:15-05:00"
          - "('a'|'b'|'c').aggregate($total & '-' & $this, 'concat')"
          - "(1 'cm'|3 'cm'|1 'm').aggregate($total + $this, 0 'cm') = 104 'cm'"
          - "(1 'cm'|3 'cm'|1 'kg'|1 'm').aggregate($total + $this, 0 'cm')"
          - "(1|2|3|4|5|6|7|8|9).sum() = 45"
          - "(1 'cm'|3 'cm'|1 'm').sum() = 104 'cm'"
          - "(7|8|9|1|2|3|4|5|6).min() = 1"
          - "(1 'cm'|3 'cm'|1 'm').min() = 1 'cm'"
          - "(7|8|9|1|2|3|4|5|6).max() = 9"
          - "(1 'cm'|3 'cm'|1 'm').max() = 1 'm'"
          - "(7|8|9|1|2|3|4|5|6).avg() = 5"
          - "(7 'm' |8 'm'|9 'm'|1 'm'|2 'm'|3 'm'|400 'cm'|5 'm'|6 'm').avg() = 5 'm'"
          - "@T10:04:23-04:00 ~ @T18:04:23+04:00"
          - "@T10:04:23-04:00 ~ @T18:04:24+04:00"
          - "@T10:04:23-04:00 ~ @T14:04:23Z"
          - "@T10:04:23-04:00 ~ @T14:04:24Z"
          - "@T10:04:23-04:00 !~ @T18:04:23+04:00"
          - "@T10:04:23-04:00 !~ @T18:04:24+04:00"
          - "@T10:04:23-04:00 !~ @T14:04:23Z"
          - "@T10:04:23-04:00 !~ @T14:04:24Z"
          - "(1|2|3|4|5|6|7|8|9).aggregate($this+$total, 0) = 45"
          - "(1|2|3|4|5|6|7|8|9).aggregate($this+$total, 2) = 47"
          - "(1|2|3|4|5|6|7|8|9).aggregate(iif($total.empty(), $this, iif($this < $total, $this, $total))) = 1"
          - "(1|2|3|4|5|6|7|8|9).aggregate(iif($total.empty(), $this, iif($this > $total, $this, $total)"
          - "@T12+04:00 > @T12:02:34.324+05:00"
          - "@T12:02:34.324+05:00 > @T12+05:00"
          - "@T23:59:23-05:00 + 2 minutes = @T00:01:23-05:00"
          - "@T23:59:23-05:00 + 5 milliseconds = @T23:59:23.005-05:00"
          - "@T23:59:23-05:00 + 1.5 seconds = @T23:59:24.500-05:00"
          - "@T23:59:23-05:00 + 1.5 's' = @T23:59:24.500-05:00"
          - "@T23:59:23-05:00 - 1.5 's' = @T23:59:21.500-05:00"
          - "@T23:59:23-05:00 + 1000 milliseconds = @T23:59:24-05:00"
          - "@T23:59:23.005-05:00 + 995 milliseconds = @T23:59:24-05:00"
          - "@T23:59:23.005-05:00 + 1990 milliseconds = @T23:59:24.995-05:00"
          - "@T23:59:23-05:00 + 1.5 hours = @T00:59:23-05:00"
          - "@T10:04:23-04:00 = @T18:04:23+04:00"
          - "@T19:01:23-05:00 = @T00:01:23-00:00"
          - "@T10:04:23-04:00 = @T18:04:24+04:00"
          - "@T10:04:23-04:00 = @T14:04:23Z"
          - "@T10:04:23-04:00 = @T14:04:24Z"
          - "@T10:04:23-04:00 = @T14:04Z"
          - "@T10:05:23-04:00 = @T14:04Z"
          - "@T10:04:23-04:00 != @T18:04:23+04:00"
          - "@T10:04:23-04:00 != @T18:04:24+04:00"
          - "@T10:04:23-04:00 != @T14:04:23Z"
          - "@T10:04:23-04:00 != @T14:04:24Z"
          - "@T09:45Z + 120 seconds = @T04:47-05:00"
          - "@T09:45Z + 59 seconds = @T09:45Z"
          - "@T09:45:23Z + 2 minutes = @T04:47:23.000-05:00"
          - "@T23:59:23Z + 2 minutes = @T00:01:23Z"
  - title: Path exclusions
    glob: "fhirpath-js/cases/3.2_paths.yaml"
    exclude:
      - title: "Mixed collections not supported"
        type: wontfix
        comment: |
          Pathling does not support the representation of mixed collections, which is required for
          these tests.
        any:
          - "Observation.value with an R4 FHIR model"
          - "Observation.value with an R5 FHIR model"
          - "Observation.value with an STU3 FHIR model"
          - "Observation.value with an DSTU2 FHIR model"
          - "Observation.value without a model"
          - "Observation.value / 185 'mo'"
          - "Observation.value / 185 months = 1"
      - title: "Contained resources not supported"
        type: feature
        id: "#2406"
        expression:
          - "(^|\\W)contained(\\W|$)"
      - title: "Custom fields not supported within FHIR resources"
        type: wontfix
        outcome: failure
        comment: Pathling does not support custom fields within FHIR resources.
        any:
          - "Access a custom field starting with a capital letter (1)"
          - "Access a custom field starting with a capital letter (2)"
  - title: Subsetting exclusions
    glob: "fhirpath-js/cases/5.3_subsetting.yaml"
    exclude:
      - title: "Primitive attributes"
        id: "#437"
        type: feature
        outcome: failure
        comment: |
          This test requires support for the primitive attribute/extension structure, as it involves 
          traversing to the `id` of a primitive element.
        any:
          - "** first for collection with null values"
  - title: Literal exclusions
    glob: "fhirpath-js/cases/4.1_literals.yaml"
    exclude:
      - title: "Using ` to wrap a string is not allowed by grammar"
        type: bug
        outcome: failure
        comment: |
          An issue has been raised on the fhirpath.js GitHub repository (#172), this may be an 
          incorrect expectation within the test cases.
        any:
          - "`a\\\\b\\'\\\"\\`\\r\\n\\t\\u0065`"
  - title: String manipulation exclusions
    glob: "fhirpath-js/cases/5.6_string_manipulation.yaml"
    exclude:
      - title: "Parse error"
        type: wontfix
        outcome: pass
        comment: |
          The test case is not valid FHIRPath syntax, it contains a parse error.
        any:
          - "('a'|'2023-05-28'.toDate()|'c').join(',')"
          - "('a'|'2023-05-28'.toDate()|'c').join(',')"
  - title: Existence exclusions
    glob: "fhirpath-js/cases/5.1_existence.yaml"
    exclude:
      - title: Support for null values within FHIR elements
        type: wontfix
        outcome: failure
        any:
          - "** null is not empty"
          - "** exists for null should return true"
          - "** error for collection that is not a singleton"
  - title: Filtering and projection exclusions
    glob: "fhirpath-js/cases/5.2_filtering_and_projection.yaml"
    exclude:
      - title: "Test runner does not support representation of mixed collections in arbitrary objects"
        type: wontfix
        outcome: failure
        any:
          - "heteroattr.ofType(String)"
          - "heteroattr.ofType(Integer)"
          - "heteroattr.ofType(Decimal)"
          - "heteroattr.ofType(Boolean)"
      - title: "where() with count() filtering on id attribute of primitive elements not supported"
        type: feature
        outcome: failure
        id: "#437"
        comment: |
          This test uses where() to filter on the 'id' attribute of primitive elements,
          then applies count(). Since Pathling doesn't support accessing the id attribute
          of primitive elements (which requires support for the primitive attribute/extension
          structure), the where() clause returns an empty collection, causing count() to
          return 0 instead of 1.
        any:
          - "Patient.name.given.where(id = 'Jacomus1Id').count()"
  - title: Equality exclusions
    glob: "fhirpath-js/cases/6.1_equality.yaml"
    exclude:
      - title: "Bundles are not supported"
        type: feature
        id: "#2418"
        expression:
          - "(^|\\W)Bundle(\\W|$)"
      - title: "Support for null values within FHIR elements"
        type: wontfix
        outcome: failure
        any:
          - "** equality for null values"
          - "** inequality for null values"
      - title: Unsupported equality for complex types
        type: new-feature
        id: "#2420"
        any:
          - "** two objects"
          - "** two objects not"
      - title: Unsupported equality for complex types
        type: new-feature
        id: "#2420"
        expression:
          - "Ops.coll = Ops.collsame"
          - "Ops.coll = Ops.collother"
      - title: Unsupported comparison above second calendar durations
        type: new-feature
        outcome: failure
        id: "#2494"
        any:
          - "12 months = 1 year"
          - "1 month = 30 days"
          - "1 week = 7 day"
          - "1 day = 24 hours"
  - title: Math6 exclusions
    glob: "fhirpath-js/cases/6.6_math.yaml"
    exclude:
      - title: Unsupported dateTime arithmetics operator (Quantity + Date)
        type: wontfix
        any:
          - "1 year + @2016-02-29"
  - title: Comparison exclusions
    glob: "fhirpath-js/cases/6.2_comparision.yaml"
    exclude:
      - title: Unsupported comparison above second calendar durations
        type: new-feature
        outcome: failure
        id: "#2494"
        any:
          - "1 year > 12 months"
          - "1 year < 12 months"
          - "1 minute > 59 seconds"
          - "1 minute < 61 seconds"
      - title: Unsupported comparison for indefinite and definite time quantities
        type: wontfix
        comment: "This is not supported as per FHIRPath specification."
        outcome: failure
        any:
          - "1 year != 1 'a'"
          - "1 month != 1 'mo'"
  - title: Types exclusions
    glob: "fhirpath-js/cases/6.3_types.yaml"
    exclude:
      - title: "Primitive elements with extensions but no value not supported"
        type: feature
        outcome: failure
        id: "#437"
        comment: |
          Pathling does not support accessing primitive elements that have extensions
          but no value. In this test, Patient.name.given[3] exists only as an extension
          in _given[3] but has no value in the given array. The is() function should
          return true for such elements, but Pathling returns null because it doesn't
          recognize the element as existing.
        any:
          - "Patient.name.given[3].is(FHIR.string)"
      - title: "as() operator with count() on primitive elements with extensions but no value"
        type: feature
        outcome: failure
        id: "#437"
        comment: |
          These tests use count() to verify that as() successfully converts
          Patient.name.given[3], which is a primitive element with extensions but
          no value. Since Pathling doesn't support accessing such elements, count()
          returns 0 instead of 1, causing the comparison to fail.
        any:
          - "(Patient.name.given[3] as FHIR.string).count() = 1"
          - "Patient.name.given[3].as(FHIR.string).count() = 1"
      - title: "'is' operator precedence differs from fhirpath.js"
        type: wontfix
        comment: |
          Per FHIRPath spec section 3.5.7 (Operator precedence), 'is' operator (level #06)
          has higher precedence than comparison operators (level #08), so '1 > 2 is Boolean'
          should parse as '1 > (2 is Boolean)' not '(1 > 2) is Boolean'.
          Pathling follows the spec; fhirpath.js appears to deviate.
        any:
          - "1 > 2 is Boolean"
      - title: "'is' operator on fields accessed through polymorphic collections"
        type: wontfix
        comment: |
          Tests require traversing Observation.value (polymorphic) before applying 'is'.
          Pathling requires ofType() for polymorphic field traversal.
        any:
          - "Observation.value.value is decimal"
          - "Observation.value.value is Element"
          - "Observation.value.system is uri"
          - "Observation.value.unit is string"
          - "Observation.value.unit is decimal"
      - title: "'is' operator with extensions on primitive types not supported"
        type: feature
        outcome: failure
        id: "#437"
        comment: |
          Pathling does not support accessing extensions on primitive elements.
          These tests involve the 'is' operator on extension values or primitive elements
          with extensions, which return null instead of the expected type check result.
        any:
          - "Patient.contact.name.family.extension('http://hl7.org/fhir/StructureDefinition/humanname-own-prefix').value is string"
          - "Patient.contact.name.family.extension('http://hl7.org/fhir/StructureDefinition/humanname-own-prefix').url is System.String"
          - "Patient.name.given[3] is FHIR.string"
      - title: "Type hierarchy checking not yet implemented"
        type: feature
        outcome: failure
        id: "#2524"
        comment: |
          The is, as, and ofType operations currently only support exact type matching
          and do not check FHIR type hierarchy (e.g., checking if a value is a subtype
          of the specified type). This will be implemented using HAPI FHIR implementation
          classes and Class.isAssignableFrom() to check inheritance.
        any:
          - "Observation is DomainResource"
          - "Observation is Resource"
          - "Observation.value is Element"
          - "Patient.contact is Element"
  - title: Collections exclusions
    glob: "fhirpath-js/cases/6.4_collections.yaml"
    exclude:
      - title: Unsupported equality for complex types
        type: new-feature
        id: "#2420"
        expression:
          - "el in coll"
          - "not_el in coll"
          - "^coll contains el"
          - "coll contains not_el"
  - title: Conversion exclusions
    glob: "fhirpath-js/cases/5.5_conversion.yaml"
    exclude:
      - title: "Null values in collections not properly handled"
        comment: "Conversion functions on null values within collections return converted values instead of empty. This is a limitation of how null values are represented in arrays."
        type: wontfix
        outcome: failure
        any:
          - "Functions.collWithNullsAndTrue[0].toBoolean()"
          - "Functions.collWithNullsAndTrue[0].toInteger()"
          - "Functions.collWithNullsAndTrue[0].toDecimal()"
          - "Functions.collWithNullsAndTrue[0].toQuantity()"
      - title: "Unsupported comparison for indefinite and definite time quantities"
        comment: "Comparing quantities from toQuantity() calendar durations with UCUM quantity literals is not supported, similar to direct quantity literal comparison (see Comparison exclusions)."
        type: wontfix
        outcome: failure
        any:
          - "'1 year'.toQuantity() != 1 'a'"
          - "MedicationRequest.dispenseRequest.expectedSupplyDuration.toQuantity() = 3 days"
      - title: "UCUM to calendar duration conversions now supported"
        comment: "Full UCUM unit conversion support has been implemented, including conversions between UCUM time units and calendar duration units (e.g., 'wk' to 'days', 'd' to 'days'). Test expectations were based on limited conversion support."
        type: feature
        id: "#2391"
        outcome: failure
        any:
          - '''1 \''wk\''''.toQuantity(''days'')'
  - title: Variable exclusions
    glob: "fhirpath-js/cases/8_variables.yaml"
    exclude:
      - title: "Unsupported context definition within view runner"
        type: new-feature
        outcome: failure
        id: "#2424"
        spel:
          - "#testCase.context == 'g1'"
  - title: Extension exclusions
    glob: "fhirpath-js/cases/extensions.yaml"
    exclude:
      - title: "ID on primitive types not supported"
        comment: "This also includes the case of an empty primitive value with non-empty attributes"
        type: feature
        outcome: failure
        id: "#437"
        any:
          - "** id for primitive type"
          - "Patient.address[1].id = 'someId'"
          - "** count nodes without value, but with extensions"
      - title: "extensions on primitive types not supported"
        type: feature
        outcome: pass
        id: "#437"
        any:
          - "** expression with extension for primitive type 1"
      - title: "extensions on primitive types not supported"
        type: feature
        outcome: failure
        id: "#437"
        any:
          - "** expression with extension for primitive type 3"
          - "Patient.communication.preferred.extension('test').value.id"
          - "Patient.communication.preferred.extension('test').exists()"
          - "Patient.name.given[0].extension('http://hl7.org/fhir/StructureDefinition/display').value = 'Jacomus1'"
          - "Patient.name.given[3].extension('http://hl7.org/fhir/StructureDefinition/display').value = 'Jacomus2'"
          - "** value of extension of extension (using FHIR model data)"
          - "** id of extension of extension"
          - "** expression with extension() for primitive type (using FHIR model data)"
          - "Patient.birthDate.extension .where(url = 'http://hl7.org/fhir/StructureDefinition/patient-birthTime') .valueDateTime.toDateTime() = @1974-12-25T14:35:45-05:00"
          - "Patient.birthDate.extension('http://hl7.org/fhir/StructureDefinition/patient-birthTime') .valueDateTime.toDateTime() = @1974-12-25T14:35:45-05:00"
  - title: Factory exclusions
    glob: "fhirpath-js/cases/factory.yaml"
    exclude:
      - title: "Custom factory not supported"
        type: feature
        id: "#2425"
        expression:
          - "%factory(\\W|$)"
  - title: Quantity Exclusions
    glob: "fhirpath-js/cases/fhir-quantity.yaml"
    exclude:
      - title: "Implicit conversion of polymorphic types not supported"
        id: "#2163"
        comment: "Should the value be implicitly converted to a quantity?"
        type: feature
        any:
          - "After converting 'a' to year it is equal to year"
          - "After converting 'a' to year it isn't equal to 'a'"
          - "After converting 'min' to minutes it is equal to minutes"
          - "Can access the comparator field when there isn't a need to convert"
  - title: Simple Exclusions
    glob: "fhirpath-js/cases/simple.yaml"
    exclude:
      - title: "Tick quotes identifiers not supported"
        id: "#2153"
        type: bug
        outcome: failure
        any:
          - "name.`family`"
      - title: "Boolean evaluation of collections"
        comment: "This seems to be incorrect expectation as name.given is not singular and should fail when evaluated as boolean."
        type: wontfix
        any:
          - "Patient.name.exists(given)"
      - title: "length without parentheses treated as child traversal"
        type: wontfix
        outcome: failure
        comment: |
          FHIRPath length() requires parentheses. The test uses $this.length
          (without parentheses), which Pathling treats as a child field access
          rather than the length() function, returning null.
        any:
          - "Patient.name.given.select($this.length) = Patient.name.given.select(length)"
      - title: "Unsupported type runner feature: expression maps"
        type: new-feature
        any:
          - "Evaluating expression for a part of a resource"
      - title: "Unsupported comparison between typed complex value and expected structure"
        type: wontfix
        outcome: failure
        any:
          - "Patient.telecom.where($this.use = 'work')"
  - title: Combining exclusions
    glob: "fhirpath-js/cases/5.4_combining.yaml"
    exclude:
      - title: "Polymorphic unions not supported"
        type: feature
        id: "#2398"
        comment: |
          Union operator currently only supports primitive types with native Spark equality
          (Boolean, Integer, String). Cross-type unions like Integer | Boolean are not supported.
        any:
          - "Functions.attrdouble | Functions.coll1.colltrue.attr"
      - title: "Indefinite calendar duration union deduplication"
        type: wontfix
        outcome: failure
        comment: |
          Pathling treats indefinite calendar durations (year, month) as non-comparable in union
          operations because they cannot be reliably converted to a common unit. The reference
          implementation deduplicates (1 year | 12 months) to '1 year', while Pathling keeps
          both values since the equality comparison returns NULL for incomparable quantities.
        any:
          - "(1 year | 12 months)"
      - title: "Union with count() on primitive elements with extensions but no value"
        type: feature
        outcome: failure
        id: "#437"
        comment: |
          This test uses count() on a union that includes Patient.name.given[3], which
          is a primitive element with extensions but no value. Since Pathling doesn't
          support accessing such elements, the union returns 0 elements instead of 1,
          causing count() to return 0 instead of 1.
        any:
          - "(Patient.name.given[0] | Patient.name.given[3]).count()"
  - title: FHIR R4 Exclusions
    glob: "fhirpath-js/cases/fhir-r4.yaml"
    exclude:
      - title: "Tick quotes identifiers not supported"
        outcome: failure
        id: "#2153"
        type: bug
        any:
          - "** testEscapedIdentifier"
          - "** testSimpleBackTick1"
      - title: "Tick quotes identifiers not supported"
        id: "#2153"
        type: bug
        any:
          - "Patient.ofType(FHIR.`Patient`).type().name"
      - title: "Implicit conversion of polymorphic types not supported"
        type: feature
        id: "#2163"
        any:
          - "Observation.value.unit"
          - "** testLiteralDecimalGreaterThanNonZeroTrue"
          - "** testLiteralDecimalGreaterThanZeroTrue"
          - "** testLiteralDecimalGreaterThanIntegerTrue"
          - "** testLiteralDecimalLessThanInteger"
          - "** testEquality28"
          - "** testNEquality24"
          - "** testLessThan22"
          - "** testLessOrEqual22"
          - "Observation.value >= 100 '[lb_av]'"
          - "Observation.value > 100 '[lb_av]'"
      - title: "incorrect multiplication/division of quantity literals"
        id: "#2168"
        comment: "E.g: 2.0 'cm' * 2.0 'm' = 0.040 'm2'"
        type: bug
        any:
          - "** testQuantity9"
          - "** testQuantity10"
      - title: "iff() with different true/false types not supported"
        comment: "E.g.: iif(true, true, 1/0)"
        type: ???
        any:
          - "** testCollectionBoolean5"
          - "** testCollectionBoolean6"
      - title: "Decimal literal exceeded maximum scale supported"
        id: "#2144"
        type: feature
        any:
          - "** testNEquality22"
          - "1.2 / 1.8 = 0.66666667"
          - "1.00000001.truncate() = 1"
          - "0.00000001.convertsToDecimal()"
      - title: "Extensions on primitive types not supported"
        type: feature
        outcome: failure
        id: "#437"
        any:
          - "Patient.birthDate.extension('http://hl7.org/fhir/StructureDefinition/patient-birthTime').exists()"
      - title: "Extensions on primitive types not supported"
        type: feature
        outcome: pass
        id: "#437"
        any:
          - "Patient.birthDate.extension('http://hl7.org/fhir/StructureDefinition/patient-birthTime1').empty()"
      - title: "Ambiguous expression"
        comment: "In Pathling '(1|2)' is interpreted as one element coding literal and not as the union of two integer literals."
        type: wontfix
        outcome: failure
        any:
          - "(1|2).not() = false"
      - title: Unsupported equality for complex types
        type: new-feature
        id: "#2420"
        expression:
          - "name = name"
          - "name != name"
      - title: Unsupported comparison above second calendar durations
        type: new-feature
        outcome: failure
        id: "#2494"
        any:
          - "7 days = 1 week"
          - "6 days < 1 week"
          - "8 days > 1 week"
      - title: "FHIR and System type namespace distinction not preserved"
        type: wontfix
        outcome: failure
        id: "#2383"
        comment: |
          In strict FHIRPath semantics, FHIR primitive types (e.g., FHIR.boolean)
          and System types (e.g., System.Boolean) exist in separate namespaces
          and should NOT be considered equivalent.

          However, Pathling intentionally maps FHIR primitives to System types
          (see FhirPathType enum) for query execution efficiency. This means
          FHIR.boolean and System.Boolean are treated as the same type internally.

          While "Boolean" correctly resolves to "System.Boolean", the is() and as()
          functions return true/value when comparing FHIR types against System types
          because Pathling does not maintain strict namespace separation.

          For example, System.Quantity and FHIR.Quantity are treated as equivalent,
          so "1 year.as(FHIR.Quantity)" returns "1 year" instead of empty.

          This is a known architectural trade-off and not considered a bug.
        any:
          - "Patient.active.is(Boolean).not()"
          - "Patient.active.is(System.Boolean).not()"
          - "1 year.as(FHIR.Quantity)"
          - "1 year as FHIR.Quantity"
      - title: "Mixed-type collections handled as empty instead of error"
        type: wontfix
        outcome: failure
        comment: |
          The testing harness does not properly support collections with mixed types.
          When as() is applied to heterogeneous collections where no items match the
          target type, it returns an empty collection. The reference implementation
          expects an error in this case, but Pathling's behavior is still correct
          per spec - it just handles the mixed-type scenario differently.

          This is a test harness limitation, not a functional issue.
        any:
          - "mixedTypeVals.as(Integer)"
          - "mixedTypeVals as Integer"
          - "mixedTypeVals.select($this as Integer)"
          - "mixedTypeVals.select($this.as(Integer))"
      - title: "Operator precedence of is/as causes union type errors"
        type: wontfix
        outcome: error
        comment: |
          Per FHIRPath spec, 'is' and 'as' operators have higher precedence than
          the union operator '|'. This causes expressions like "1 | 1 is Integer"
          to parse as "1 | (1 is Integer)", which attempts to union an Integer
          value with a Boolean value (the result of 'is').

          Pathling correctly rejects this as a type error: union requires both
          operands to be compatible types. The expression would need parentheses
          like "(1 | 1) is Integer" to achieve the intended semantics.

          This is correct behavior per spec operator precedence rules.
        any:
          - "1 | 1 is Integer"
