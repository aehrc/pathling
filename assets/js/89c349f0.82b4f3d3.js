"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[8427],{260:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/import-5a4d2087390fb6affe494bc66b4d08bc.svg"},617:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/import-dark-f1b11a37d56167f25f32a90696b5aa4b.svg"},8453:(e,r,t)=>{t.d(r,{R:()=>o,x:()=>a});var n=t(6540);const s={},i=n.createContext(s);function o(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(i.Provider,{value:r},e.children)}},9187:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"server/operations/import","title":"Import","description":"The import operation allows FHIR data to be imported into the server, making it available for query via other operations such as search, aggregate and extract.","source":"@site/versioned_docs/version-7.2.0/server/operations/import.md","sourceDirName":"server/operations","slug":"/server/operations/import","permalink":"/docs/7.2.0/server/operations/import","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/versioned_docs/version-7.2.0/server/operations/import.md","tags":[],"version":"7.2.0","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"description":"The import operation allows FHIR data to be imported into the server, making it available for query via other operations such as search, aggregate and extract."},"sidebar":"server","previous":{"title":"Getting started","permalink":"/docs/7.2.0/server/getting-started"},"next":{"title":"Search","permalink":"/docs/7.2.0/server/operations/search"}}');var s=t(4848),i=t(8453);const o={sidebar_position:1,description:"The import operation allows FHIR data to be imported into the server, making it available for query via other operations such as search, aggregate and extract."},a="Import",c={},h=[{value:"Request",id:"request",level:2},{value:"Response",id:"response",level:2},{value:"Examples",id:"examples",level:2}];function l(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"import",children:"Import"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://pathling.csiro.au/fhir/OperationDefinition/import-7",children:"FHIR OperationDefinition"})}),"\n",(0,s.jsxs)(r.p,{children:["This operation allows FHIR R4 data to be imported into the server, making it\navailable for query via other operations such\nas ",(0,s.jsx)(r.a,{href:"./search",children:"search"}),", ",(0,s.jsx)(r.a,{href:"./aggregate",children:"aggregate"})," and ",(0,s.jsx)(r.a,{href:"./extract",children:"extract"}),". Links\nto retrieve that data are provided rather that sending the data inline within\nthe request itself. This is to allow for large data sets to be imported\nefficiently."]}),"\n",(0,s.jsx)(r.p,{children:"Source formats currently supported are:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://hl7.org/fhir/R4/nd-json.html",children:"NDJSON"})," format"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://parquet.apache.org/",children:"Parquet"})," conforming to\nthe ",(0,s.jsx)(r.a,{href:"../../libraries/encoders/schema",children:"Pathling schema"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://delta.io/",children:"Delta Lake"})," conforming to\nthe ",(0,s.jsx)(r.a,{href:"../../libraries/encoders/schema",children:"Pathling schema"})]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Currently Pathling supports retrieval of NDJSON files from\n",(0,s.jsx)(r.a,{href:"https://aws.amazon.com/s3/",children:"Amazon S3"})," (",(0,s.jsx)(r.code,{children:"s3://"}),"),\n",(0,s.jsx)(r.a,{href:"https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html",children:"HDFS"})," (",(0,s.jsx)(r.code,{children:"hdfs://"}),") and\nfilesystem (",(0,s.jsx)(r.code,{children:"file://"}),") URLs. Authentication is supported for S3, see\n",(0,s.jsx)(r.a,{href:"../configuration",children:"Configuration"})," for details."]}),"\n",(0,s.jsxs)(r.p,{children:["Import sources must be explicitly whitelisted within the configuration, for\nsecurity reasons. See the ",(0,s.jsx)(r.a,{href:"../configuration#import",children:"Import"})," section of the\nconfiguration documentation for details."]}),"\n",(0,s.jsxs)(r.p,{children:["There are a number of configuration values that affect the encoding of resources\nimported by this operation, see the ",(0,s.jsx)(r.a,{href:"../configuration#encoding",children:"Encoding"}),"\nsection of the configuration documentation for details."]}),"\n",(0,s.jsx)(r.admonition,{type:"note",children:(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"import"})," operation supports the ",(0,s.jsx)(r.a,{href:"../async",children:"Asynchronous Request Pattern"}),",\nwhich allows you to kick off a long-running request and check on its progress\nusing a status endpoint."]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"POST [FHIR endpoint]/$import\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.img,{alt:"Import",src:t(260).A+"#light-mode-only",title:"Import",width:"668",height:"447"}),"\n",(0,s.jsx)(r.img,{alt:"Import",src:t(617).A+"#dark-mode-only",title:"Import",width:"668",height:"447"})]}),"\n",(0,s.jsx)(r.h2,{id:"request",children:"Request"}),"\n",(0,s.jsxs)(r.p,{children:["The request for the ",(0,s.jsx)(r.code,{children:"$import"})," operation is a\n",(0,s.jsx)(r.a,{href:"https://hl7.org/fhir/R4/parameters.html",children:"Parameters"})," resource containing the\nfollowing parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"source [1..*]"})," - A source FHIR NDJSON file containing resources to be\nincluded within this import operation. Each file must contain only one type of\nresource.","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"resourceType [1..1] (code)"})," - The base FHIR resource type contained\nwithin this source file. Code must be a member of\n",(0,s.jsx)(r.a,{href:"http://hl7.org/fhir/ValueSet/resource-types",children:"http://hl7.org/fhir/ValueSet/resource-types"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"url [1..1] (uri)"})," - A URL that can be used to retrieve this source file."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"mode [0..1] (code)"})," - A value of ",(0,s.jsx)(r.code,{children:"overwrite"})," will cause all existing\nresources of the specified type to be deleted and replaced with the\ncontents of the source file. A value of ",(0,s.jsx)(r.code,{children:"merge"})," will match existing\nresources with updated resources in the source file based on their ID, and\neither update the existing resources or add new resources as appropriate.\nThe default value is ",(0,s.jsx)(r.code,{children:"overwrite"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"format [0..1] (code)"})," - Indicates the format of the source file.\nPossible values are ",(0,s.jsx)(r.code,{children:"ndjson"}),", ",(0,s.jsx)(r.code,{children:"parquet"})," and ",(0,s.jsx)(r.code,{children:"delta"}),". The default value\nis ",(0,s.jsx)(r.code,{children:"ndjson"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"response",children:"Response"}),"\n",(0,s.jsxs)(r.p,{children:["The response from the ",(0,s.jsx)(r.code,{children:"$import"})," operation is an\n",(0,s.jsx)(r.a,{href:"https://hl7.org/fhir/R4/operationoutcome.html",children:"OperationOutcome"})," resource,\nwhich will indicate success or a description of any errors that occurred."]}),"\n",(0,s.jsx)(r.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(r.p,{children:["Check out example ",(0,s.jsx)(r.code,{children:"import"})," requests in the Postman collection:"]}),"\n",(0,s.jsx)("a",{class:"postman-link",href:"https://documenter.getpostman.com/view/634774/UVsQs48s#72ee4a60-e701-4d1a-af58-85a762301b6c",children:(0,s.jsx)("img",{src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"})})]})}function d(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);