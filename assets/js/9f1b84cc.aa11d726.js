"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[3093],{3991(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"server/operations/batch","title":"Batch","description":"The batch operation allows you to perform multiple create, update, and delete operations in a single request.","source":"@site/docs/server/operations/batch.md","sourceDirName":"server/operations","slug":"/server/operations/batch","permalink":"/docs/server/operations/batch","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/docs/server/operations/batch.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"sidebar_label":"Batch","description":"The batch operation allows you to perform multiple create, update, and delete operations in a single request."},"sidebar":"server","previous":{"title":"CRUD","permalink":"/docs/server/operations/crud"},"next":{"title":"Run view","permalink":"/docs/server/operations/view-run"}}');var s=t(4848),a=t(8453);const i={sidebar_position:7,sidebar_label:"Batch",description:"The batch operation allows you to perform multiple create, update, and delete operations in a single request."},c="Batch",o={},l=[{value:"Requirements",id:"requirements",level:2},{value:"Batch update example",id:"batch-update-example",level:2},{value:"Batch create example",id:"batch-create-example",level:2},{value:"Batch delete example",id:"batch-delete-example",level:2},{value:"Mixed batch example",id:"mixed-batch-example",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"batch",children:"Batch"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"https://hl7.org/fhir/R4/http.html#transaction",children:"batch"})," operation allows you\nto perform multiple create, update, and/or delete operations in a single\nrequest."]}),"\n",(0,s.jsxs)(n.p,{children:["For details on individual operations, see the ",(0,s.jsx)(n.a,{href:"crud",children:"CRUD"})," documentation."]}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(n.p,{children:"Each entry in the batch Bundle must include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.code,{children:"request.method"})," of ",(0,s.jsx)(n.code,{children:"POST"})," (create), ",(0,s.jsx)(n.code,{children:"PUT"})," (update), or ",(0,s.jsx)(n.code,{children:"DELETE"})," (delete)"]}),"\n",(0,s.jsxs)(n.li,{children:["For create (POST): A ",(0,s.jsx)(n.code,{children:"request.url"})," with just the resource type (e.g.,\n",(0,s.jsx)(n.code,{children:"Patient"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["For update (PUT) and delete (DELETE): A ",(0,s.jsx)(n.code,{children:"request.url"})," in the format\n",(0,s.jsx)(n.code,{children:"[resource type]/[id]"})," (e.g., ",(0,s.jsx)(n.code,{children:"Patient/patient-1"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.code,{children:"resource"})," matching the type specified in the URL (not required for DELETE)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"batch-update-example",children:"Batch update example"}),"\n",(0,s.jsx)(n.p,{children:"Update multiple resources in a single request:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /fhir\nContent-Type: application/fhir+json\n\n{\n    "resourceType": "Bundle",\n    "type": "batch",\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-1",\n                "name": [{"family": "Smith"}]\n            },\n            "request": {\n                "method": "PUT",\n                "url": "Patient/patient-1"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-2",\n                "name": [{"family": "Jones"}]\n            },\n            "request": {\n                "method": "PUT",\n                "url": "Patient/patient-2"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"The response will be a batch-response Bundle containing the outcome for each\nentry:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Bundle",\n    "type": "batch-response",\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-1",\n                "name": [{"family": "Smith"}]\n            },\n            "response": {\n                "status": "200"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-2",\n                "name": [{"family": "Jones"}]\n            },\n            "response": {\n                "status": "200"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"batch-create-example",children:"Batch create example"}),"\n",(0,s.jsx)(n.p,{children:"Create multiple resources with server-generated IDs:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /fhir\nContent-Type: application/fhir+json\n\n{\n    "resourceType": "Bundle",\n    "type": "batch",\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "name": [{"family": "Smith"}]\n            },\n            "request": {\n                "method": "POST",\n                "url": "Patient"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "name": [{"family": "Jones"}]\n            },\n            "request": {\n                "method": "POST",\n                "url": "Patient"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The response will include ",(0,s.jsx)(n.code,{children:"201"})," status codes and server-generated IDs:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Bundle",\n    "type": "batch-response",\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",\n                "name": [{"family": "Smith"}]\n            },\n            "response": {\n                "status": "201"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "f1e2d3c4-b5a6-0987-fedc-ba0987654321",\n                "name": [{"family": "Jones"}]\n            },\n            "response": {\n                "status": "201"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"batch-delete-example",children:"Batch delete example"}),"\n",(0,s.jsx)(n.p,{children:"Delete multiple resources in a single request:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /fhir\nContent-Type: application/fhir+json\n\n{\n    "resourceType": "Bundle",\n    "type": "batch",\n    "entry": [\n        {\n            "request": {\n                "method": "DELETE",\n                "url": "Patient/patient-1"\n            }\n        },\n        {\n            "request": {\n                "method": "DELETE",\n                "url": "Patient/patient-2"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The response will include ",(0,s.jsx)(n.code,{children:"204"})," status codes for successful deletions:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Bundle",\n    "type": "batch-response",\n    "entry": [\n        {\n            "response": {\n                "status": "204"\n            }\n        },\n        {\n            "response": {\n                "status": "204"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"mixed-batch-example",children:"Mixed batch example"}),"\n",(0,s.jsx)(n.p,{children:"You can mix create, update, and delete operations in a single batch:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /fhir\nContent-Type: application/fhir+json\n\n{\n    "resourceType": "Bundle",\n    "type": "batch",\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "name": [{"family": "NewPatient"}]\n            },\n            "request": {\n                "method": "POST",\n                "url": "Patient"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "existing-patient",\n                "name": [{"family": "UpdatedName"}]\n            },\n            "request": {\n                "method": "PUT",\n                "url": "Patient/existing-patient"\n            }\n        },\n        {\n            "request": {\n                "method": "DELETE",\n                "url": "Patient/patient-to-delete"\n            }\n        }\n    ]\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>c});var r=t(6540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);