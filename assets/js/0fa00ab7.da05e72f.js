"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[7546],{7331(e,r,n){n.r(r),n.d(r,{assets:()=>h,contentTitle:()=>a,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"server/operations/search","title":"Search","description":"Pathling supports both standard FHIR search parameters and FHIRPath-based search for filtering resources.","source":"@site/docs/server/operations/search.md","sourceDirName":"server/operations","slug":"/server/operations/search","permalink":"/docs/server/operations/search","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/docs/server/operations/search.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"Pathling supports both standard FHIR search parameters and FHIRPath-based search for filtering resources."},"sidebar":"server","previous":{"title":"Bulk submit","permalink":"/docs/server/operations/bulk-submit"},"next":{"title":"CRUD","permalink":"/docs/server/operations/crud"}}');var i=n(4848),t=n(8453);const d={sidebar_position:5,description:"Pathling supports both standard FHIR search parameters and FHIRPath-based search for filtering resources."},a="Search",h={},c=[{value:"Standard search parameters",id:"standard-search-parameters",level:2},{value:"Supported parameter types",id:"supported-parameter-types",level:3},{value:"Supported modifiers",id:"supported-modifiers",level:3},{value:"Combining parameters",id:"combining-parameters",level:3},{value:"Date prefixes",id:"date-prefixes",level:3},{value:"Examples",id:"examples",level:3},{value:"FHIRPath-based search",id:"fhirpath-based-search",level:2},{value:"Request",id:"request",level:3},{value:"Examples",id:"examples-1",level:3},{value:"Combining standard and FHIRPath search",id:"combining-standard-and-fhirpath-search",level:2},{value:"Response",id:"response",level:2},{value:"Error handling",id:"error-handling",level:2},{value:"Limitations",id:"limitations",level:2}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"search",children:"Search"})}),"\n",(0,i.jsx)(r.p,{children:"Pathling supports two complementary approaches to searching FHIR resources:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Standard FHIR search parameters"})," \u2014 filter using the search parameters\ndefined in the FHIR specification (e.g., ",(0,i.jsx)(r.code,{children:"gender"}),", ",(0,i.jsx)(r.code,{children:"birthdate"}),", ",(0,i.jsx)(r.code,{children:"code"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"FHIRPath-based search"})," \u2014 filter using arbitrary\n",(0,i.jsx)(r.a,{href:"/docs/fhirpath",children:"FHIRPath"})," expressions for more complex queries."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Both approaches can be combined in a single request."}),"\n",(0,i.jsx)(r.h2,{id:"standard-search-parameters",children:"Standard search parameters"}),"\n",(0,i.jsxs)(r.p,{children:["Standard FHIR search parameters can be used directly in the URL query string,\nfollowing the ",(0,i.jsx)(r.a,{href:"https://hl7.org/fhir/R4/search.html",children:"FHIR search specification"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET [FHIR endpoint]/[resource type]?[parameter]=[value]&...\n"})}),"\n",(0,i.jsx)(r.h3,{id:"supported-parameter-types",children:"Supported parameter types"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Example"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Token"}),(0,i.jsx)(r.td,{children:"Matches a code, system|code, or boolean value"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"gender=male"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"String"}),(0,i.jsx)(r.td,{children:"Case-insensitive prefix match on string fields"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"family=Smith"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Date"}),(0,i.jsx)(r.td,{children:"Matches date/dateTime values with optional prefix"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"birthdate=ge1990-01-01"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Number"}),(0,i.jsx)(r.td,{children:"Matches numeric values with optional prefix"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"length=gt5"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Quantity"}),(0,i.jsx)(r.td,{children:"Matches quantity values with optional units"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"value-quantity=gt100||mg"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Reference"}),(0,i.jsx)(r.td,{children:"Matches references to other resources"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"subject=Patient/123"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"URI"}),(0,i.jsx)(r.td,{children:"Matches URI values with exact equality"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"url=http://example.org"})})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"supported-modifiers",children:"Supported modifiers"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Modifier"}),(0,i.jsx)(r.th,{children:"Applies to"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:":not"})}),(0,i.jsx)(r.td,{children:"Token, Reference, URI"}),(0,i.jsx)(r.td,{children:"Negated matching"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:":exact"})}),(0,i.jsx)(r.td,{children:"String"}),(0,i.jsx)(r.td,{children:"Case-sensitive exact match (instead of prefix)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:":below"})}),(0,i.jsx)(r.td,{children:"URI"}),(0,i.jsx)(r.td,{children:"Prefix matching on URI values"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:":above"})}),(0,i.jsx)(r.td,{children:"URI"}),(0,i.jsx)(r.td,{children:"Inverse prefix matching on URI values"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:":[type]"})}),(0,i.jsx)(r.td,{children:"Reference"}),(0,i.jsxs)(r.td,{children:["Constrains the target resource type (e.g., ",(0,i.jsx)(r.code,{children:"subject:Patient=123"}),")"]})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"combining-parameters",children:"Combining parameters"}),"\n",(0,i.jsx)(r.p,{children:"Following the FHIR specification:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"AND logic"}),": Repeat the same or different parameters\n(",(0,i.jsx)(r.code,{children:"gender=male&active=true"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"OR logic"}),": Use comma-separated values within a single parameter\n(",(0,i.jsx)(r.code,{children:"gender=male,female"}),")."]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"date-prefixes",children:"Date prefixes"}),"\n",(0,i.jsx)(r.p,{children:"Date parameters support comparison prefixes:"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Prefix"}),(0,i.jsx)(r.th,{children:"Meaning"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"eq"})}),(0,i.jsx)(r.td,{children:"Equal (default)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"ne"})}),(0,i.jsx)(r.td,{children:"Not equal"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"gt"})}),(0,i.jsx)(r.td,{children:"Greater than"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"lt"})}),(0,i.jsx)(r.td,{children:"Less than"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"ge"})}),(0,i.jsx)(r.td,{children:"Greater than or equal"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"le"})}),(0,i.jsx)(r.td,{children:"Less than or equal"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(r.p,{children:"Retrieve all male patients:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?gender=male\n"})}),"\n",(0,i.jsx)(r.p,{children:"Retrieve patients born on or after 1990:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?birthdate=ge1990-01-01\n"})}),"\n",(0,i.jsx)(r.p,{children:'Retrieve patients with family name starting with "Smith":'}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?family=Smith\n"})}),"\n",(0,i.jsx)(r.p,{children:"Retrieve patients with exact family name match:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?family:exact=Smith\n"})}),"\n",(0,i.jsx)(r.p,{children:"Retrieve male patients born after 1980 (AND logic):"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?gender=male&birthdate=gt1980-01-01\n"})}),"\n",(0,i.jsx)(r.p,{children:"Retrieve male or female patients (OR logic):"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?gender=male,female\n"})}),"\n",(0,i.jsx)(r.h2,{id:"fhirpath-based-search",children:"FHIRPath-based search"}),"\n",(0,i.jsxs)(r.p,{children:["For queries that go beyond what standard search parameters can express, Pathling\nsupports FHIRPath-based search using a\n",(0,i.jsx)(r.a,{href:"https://hl7.org/fhir/R4/search.html#advanced",children:"named query"})," called ",(0,i.jsx)(r.code,{children:"fhirPath"}),"."]}),"\n",(0,i.jsx)(r.p,{children:"Each FHIRPath expression is evaluated against each resource, returning a Boolean\nvalue which determines whether the resource will be included in the search\nresult."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET [FHIR endpoint]/[resource type]?_query=fhirPath&filter=[FHIRPath expression]...\n"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"POST [FHIR endpoint]/[resource type]/_search\n"})}),"\n",(0,i.jsx)(r.h3,{id:"request",children:"Request"}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"filter"})," parameter is used to specify FHIRPath expressions:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"filter [1..*]"})," - (string) A FHIRPath expression that can be evaluated against\neach resource in the data set to determine whether it is included within the\nresult. The context is an individual resource of the type that the search is\nbeing invoked against. The expression must evaluate to a Boolean value."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Multiple instances of the ",(0,i.jsx)(r.code,{children:"filter"})," parameter are combined using Boolean AND\nlogic, and multiple expressions can be provided within a single parameter and\ndelimited by commas to achieve OR logic. In addition to this,\n",(0,i.jsx)(r.a,{href:"https://hl7.org/fhirpath/#boolean-logic",children:"FHIRPath boolean operators"})," can be\nused within expressions."]}),"\n",(0,i.jsx)(r.h3,{id:"examples-1",children:"Examples"}),"\n",(0,i.jsx)(r.p,{children:"Retrieve all male patients:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=gender%3D'male'\n"})}),"\n",(0,i.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,i.jsx)(r.code,{children:"gender='male'"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Retrieve female patients who are active (AND logic via multiple ",(0,i.jsx)(r.code,{children:"filter"}),"\nparameters):"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=gender%3D'female'&filter=active%3Dtrue\n"})}),"\n",(0,i.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,i.jsx)(r.code,{children:"gender='female'"})," and ",(0,i.jsx)(r.code,{children:"active=true"}),"."]}),"\n",(0,i.jsx)(r.p,{children:"Retrieve patients born after 1980:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=birthDate%20%3E%20%401980-01-01\n"})}),"\n",(0,i.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,i.jsx)(r.code,{children:"birthDate > @1980-01-01"}),"."]}),"\n",(0,i.jsx)(r.p,{children:"Retrieve observations with a specific code and value above threshold:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Observation?_query=fhirPath&filter=code.coding.code%3D'8867-4'%20and%20valueQuantity.value%20%3E%20100\n"})}),"\n",(0,i.jsxs)(r.p,{children:["This is the URL-encoded form of\n",(0,i.jsx)(r.code,{children:"code.coding.code='8867-4' and valueQuantity.value > 100"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"combining-standard-and-fhirpath-search",children:"Combining standard and FHIRPath search"}),"\n",(0,i.jsxs)(r.p,{children:["Standard search parameters can be used alongside FHIRPath filters in the same\nrequest by including ",(0,i.jsx)(r.code,{children:"_query=fhirPath"})," with both ",(0,i.jsx)(r.code,{children:"filter"})," and standard\nparameters. The results are filtered by both the standard parameters and the\nFHIRPath expressions (AND logic)."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=active%3Dtrue&gender=male\n"})}),"\n",(0,i.jsxs)(r.p,{children:["This retrieves active male patients using a FHIRPath filter for ",(0,i.jsx)(r.code,{children:"active"})," and a\nstandard search parameter for ",(0,i.jsx)(r.code,{children:"gender"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"response",children:"Response"}),"\n",(0,i.jsxs)(r.p,{children:["Any search request in FHIR returns a\n",(0,i.jsx)(r.a,{href:"https://hl7.org/fhir/R4/bundle.html",children:"Bundle"})," of matching resources."]}),"\n",(0,i.jsxs)(r.p,{children:["Pagination links are included for responses which include a large number of\nresources. The number of resources returned in a single response is 100 by\ndefault \u2014 this can be altered using the ",(0,i.jsx)(r.code,{children:"_count"})," parameter."]}),"\n",(0,i.jsxs)(r.p,{children:["See ",(0,i.jsx)(r.a,{href:"https://hl7.org/fhir/R4/search.html",children:"Search"})," in the FHIR specification for\nmore details."]}),"\n",(0,i.jsx)(r.p,{children:"Example response:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\n    "resourceType": "Bundle",\n    "type": "searchset",\n    "total": 2,\n    "link": [\n        {\n            "relation": "self",\n            "url": "http://localhost:8080/fhir/Patient?gender=male"\n        }\n    ],\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-1",\n                "gender": "male",\n                "birthDate": "1970-01-01"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-2",\n                "gender": "male",\n                "birthDate": "1985-06-15"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,i.jsx)(r.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,i.jsxs)(r.p,{children:["The following errors return HTTP 400 Bad Request with an ",(0,i.jsx)(r.code,{children:"OperationOutcome"}),"\nresource:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Unknown search parameters"}),": Using a parameter not defined for the resource\ntype (e.g., ",(0,i.jsx)(r.code,{children:"Patient?nonexistent=value"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Unsupported modifiers"}),": Using a modifier not supported for the parameter\ntype (e.g., ",(0,i.jsx)(r.code,{children:"gender:exact=male"})," \u2014 ",(0,i.jsx)(r.code,{children:":exact"})," is only valid for string\nparameters)."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Invalid FHIRPath expressions"}),": Syntax errors in FHIRPath filter\nexpressions."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"limitations",children:"Limitations"}),"\n",(0,i.jsx)(r.p,{children:"The following search parameters and features are not yet supported:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Underscore-prefixed common search parameters: ",(0,i.jsx)(r.code,{children:"_id"}),", ",(0,i.jsx)(r.code,{children:"_lastUpdated"}),", ",(0,i.jsx)(r.code,{children:"_tag"}),",\n",(0,i.jsx)(r.code,{children:"_profile"}),", ",(0,i.jsx)(r.code,{children:"_security"}),", ",(0,i.jsx)(r.code,{children:"_text"}),", ",(0,i.jsx)(r.code,{children:"_content"}),", ",(0,i.jsx)(r.code,{children:"_list"}),", ",(0,i.jsx)(r.code,{children:"_has"}),", ",(0,i.jsx)(r.code,{children:"_type"}),"."]}),"\n",(0,i.jsx)(r.li,{children:"Composite search parameter type."}),"\n",(0,i.jsx)(r.li,{children:"Special search parameter type."}),"\n",(0,i.jsxs)(r.li,{children:["Chained parameters (e.g., ",(0,i.jsx)(r.code,{children:"subject.name=Smith"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:["Reverse chained parameters (",(0,i.jsx)(r.code,{children:"_has"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:["Result sorting (",(0,i.jsx)(r.code,{children:"_sort"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:["Include parameters (",(0,i.jsx)(r.code,{children:"_include"}),", ",(0,i.jsx)(r.code,{children:"_revinclude"}),")."]}),"\n"]})]})}function o(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,r,n){n.d(r,{R:()=>d,x:()=>a});var s=n(6540);const i={},t=s.createContext(i);function d(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);