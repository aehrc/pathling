"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[2244],{218:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"server/configuration","title":"Configuration","description":"Configuration options for the Pathling server.","source":"@site/docs/server/configuration.md","sourceDirName":"server","slug":"/server/configuration","permalink":"/docs/server/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/docs/server/configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"description":"Configuration options for the Pathling server."},"sidebar":"server","previous":{"title":"Getting started","permalink":"/docs/server/getting-started"},"next":{"title":"Import","permalink":"/docs/server/operations/import"}}');var r=i(4848),s=i(8453);const o={sidebar_position:2,description:"Configuration options for the Pathling server."},l="Configuration",a={},d=[{value:"Configuration variables",id:"configuration-variables",level:2},{value:"General",id:"general",level:3},{value:"Import",id:"import",level:3},{value:"Ping and pull",id:"ping-and-pull",level:4},{value:"Export",id:"export",level:3},{value:"Bulk submit",id:"bulk-submit",level:3},{value:"Asynchronous processing",id:"asynchronous-processing",level:3},{value:"Operations",id:"operations",level:3},{value:"Encoding",id:"encoding",level:3},{value:"Storage",id:"storage",level:3},{value:"Query",id:"query",level:3},{value:"Apache Spark",id:"apache-spark",level:3},{value:"Terminology service",id:"terminology-service",level:3},{value:"Client",id:"client",level:4},{value:"Cache",id:"cache",level:4},{value:"Authentication",id:"authentication",level:4},{value:"Authorization",id:"authorization",level:3},{value:"Admin UI",id:"admin-ui",level:3},{value:"HTTP caching",id:"http-caching",level:3},{value:"Cross-Origin Resource Sharing (CORS)",id:"cross-origin-resource-sharing-cors",level:3},{value:"Monitoring",id:"monitoring",level:3},{value:"Server base",id:"server-base",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,r.jsx)(n.p,{children:"Pathling is distributed in two forms: as a JAR file, and a Docker image. The\neasiest way to configure Pathling is through environment variables."}),"\n",(0,r.jsxs)(n.p,{children:["If environment variables are problematic for your deployment, Pathling can be\nalso configured in a variety of other ways as supported by the Spring Boot\nframework (see\n",(0,r.jsx)(n.a,{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config",children:"Spring Boot Reference Documentation: Externalized Configuration"}),")."]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-variables",children:"Configuration variables"}),"\n",(0,r.jsx)(n.h3,{id:"general",children:"General"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"server.port"})," - (default: ",(0,r.jsx)(n.code,{children:"8080"}),") The port which the server should bind to and\nlisten for HTTP connections."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"server.servlet.context-path"})," - A prefix to add to the API endpoint, e.g. a\nvalue of ",(0,r.jsx)(n.code,{children:"/foo"})," would cause the FHIR endpoint to be changed to ",(0,r.jsx)(n.code,{children:"/foo/fhir"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.implementationDescription"})," - (default:\n",(0,r.jsx)(n.code,{children:"Yet Another Pathling Server"}),") Controls the content of the\n",(0,r.jsx)(n.code,{children:"implementation.description"})," element within the server's\n",(0,r.jsx)(n.a,{href:"https://hl7.org/fhir/R4/http.html#capabilities",children:"CapabilityStatement"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JAVA_TOOL_OPTIONS"})," - (default in Docker image: ",(0,r.jsx)(n.code,{children:"-Xmx2g"}),") Allows for the\nconfiguration of arbitrary options on the Java VM that Pathling runs within."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Additionally, you can set any variable supported by Spring Boot, see\n",(0,r.jsx)(n.a,{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties",children:"Spring Boot Reference Documentation: Common Application properties"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"import",children:"Import"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.allowableSources"})," - (default: ",(0,r.jsx)(n.code,{children:"file:///usr/share/staging"}),") A\nset of URL prefixes which are allowable for use within the import operation.\n",(0,r.jsx)(n.strong,{children:"Important note"}),": a trailing slash should be used in cases where an attacker\ncould create an alternative URL with the same prefix, e.g. ",(0,r.jsx)(n.code,{children:"s3://some-bucket"}),"\nwould also match ",(0,r.jsx)(n.code,{children:"s3://some-bucket-alternative"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"ping-and-pull",children:"Ping and pull"}),"\n",(0,r.jsxs)(n.p,{children:["These settings configure the ",(0,r.jsx)(n.a,{href:"./operations/import-pnp",children:"ping and pull import"}),"\noperation, which retrieves data from external FHIR bulk export endpoints."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.clientId"})," - The client identifier for SMART Backend\nServices authentication."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.tokenEndpoint"})," - The token endpoint URL for obtaining\naccess tokens. If not specified, the client will attempt to discover it via\nthe SMART configuration endpoint."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.privateKeyJwk"})," - The private key in JWK format for\nasymmetric authentication (RS384)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.clientSecret"})," - The client secret for symmetric\nauthentication."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.scope"})," - The requested scope for authentication (e.g.,\n",(0,r.jsx)(n.code,{children:"system/*.read"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.tokenExpiryTolerance"})," - (default: ",(0,r.jsx)(n.code,{children:"120"}),") The minimum\nnumber of seconds that a token should have before expiry when deciding whether\nto use it. If a cached token has less than this many seconds until expiry, a\nnew token will be requested."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.downloadLocation"})," - (default: ",(0,r.jsx)(n.code,{children:"/usr/share/staging/pnp"}),")\nThe directory where files will be downloaded during ping and pull import\noperations. This location should have sufficient space for large FHIR exports."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.import.pnp.fileExtension"})," - (default: ",(0,r.jsx)(n.code,{children:".ndjson"}),") The file extension\nto filter for when processing downloaded files."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"export",children:"Export"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.export.resultExpiry"})," - (default: ",(0,r.jsx)(n.code,{children:"86400"}),") The duration in seconds\nthat export results will be available before expiry. Defaults to 24 hours."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"bulk-submit",children:"Bulk submit"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.bulkSubmit.allowedSubmitters"})," - (default: ",(0,r.jsx)(n.code,{children:"[]"}),") The list of allowed\nsubmitters (by system and value) that can use the $bulk-submit operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.bulkSubmit.allowableSources"})," - (default: ",(0,r.jsx)(n.code,{children:"https://"}),") URL prefixes\nthat are allowed as sources for manifest and file URLs."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"asynchronous-processing",children:"Asynchronous processing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.async.enabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables asynchronous processing\nfor those operations that support it, when explicitly requested."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.async.varyHeadersExcludedFromCacheKey"})," - (default: ",(0,r.jsx)(n.code,{children:"Accept"}),",\n",(0,r.jsx)(n.code,{children:"Accept-Encoding"}),") A subset of ",(0,r.jsx)(n.code,{children:"pathling.httpCaching.vary"})," HTTP headers,\nwhich should be excluded from determining that asynchronous requests are\nequivalent and can be routed to the same asynchronous job."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.async.cacheMaxAge"})," - (default: ",(0,r.jsx)(n.code,{children:"1"}),") The max-age value (in seconds)\nfor ",(0,r.jsx)(n.code,{children:"Cache-Control"})," headers on async endpoint responses (",(0,r.jsx)(n.code,{children:"$job"})," and\n",(0,r.jsx)(n.code,{children:"$result"}),"). This value should be configured to match your strategy for\ncleaning up job result files, such as an S3 bucket lifecycle policy. For\nexample, if job files are retained for 24 hours, set this to ",(0,r.jsx)(n.code,{children:"86400"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"operations",children:"Operations"}),"\n",(0,r.jsx)(n.p,{children:"These settings enable or disable individual server operations. All operations\nare enabled by default. When an operation is disabled, it returns a client\nerror response and is excluded from the CapabilityStatement."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.createEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables CRUD create\noperations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.readEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables CRUD read\noperations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.updateEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables CRUD update\noperations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.deleteEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables CRUD delete\noperations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.searchEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables CRUD search\noperations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.batchEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables batch/transaction\nbundle operations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.exportEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the system-level\n",(0,r.jsx)(n.a,{href:"./operations/export",children:"$export"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.patientExportEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the\nPatient-level ",(0,r.jsx)(n.a,{href:"./operations/export",children:"$export"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.groupExportEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the\nGroup-level ",(0,r.jsx)(n.a,{href:"./operations/export",children:"$export"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.importEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the\n",(0,r.jsx)(n.a,{href:"./operations/import",children:"$import"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.importPnpEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the\n",(0,r.jsx)(n.a,{href:"./operations/import-pnp",children:"$import-pnp"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.viewDefinitionRunEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the\nsystem-level ",(0,r.jsx)(n.a,{href:"./operations/view-run",children:"$viewdefinition-run"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.viewDefinitionInstanceRunEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),")\nEnables the instance-level ",(0,r.jsx)(n.a,{href:"./operations/view-run",children:"$run"})," operation on\nViewDefinition resources."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.viewDefinitionExportEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables\nthe ",(0,r.jsx)(n.a,{href:"./operations/view-export",children:"$viewdefinition-export"})," operation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.operations.bulkSubmitEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables the\n",(0,r.jsx)(n.a,{href:"./operations/bulk-submit",children:"$bulk-submit"})," operation."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"encoding",children:"Encoding"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.encoding.maxNestingLevel"})," - (default: ",(0,r.jsx)(n.code,{children:"3"}),") Controls the maximum\ndepth of nested element data that is encoded upon import. This affects certain\nelements within FHIR resources that contain recursive references, e.g.\n",(0,r.jsx)(n.a,{href:"https://hl7.org/fhir/R4/questionnaireresponse.html",children:"QuestionnaireResponse.item"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.encoding.enableExtensions"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables support for\nFHIR extensions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.encoding.openTypes"})," - (default: ",(0,r.jsx)(n.code,{children:"boolean"}),", ",(0,r.jsx)(n.code,{children:"code"}),", ",(0,r.jsx)(n.code,{children:"date"}),",\n",(0,r.jsx)(n.code,{children:"dateTime"}),",\n",(0,r.jsx)(n.code,{children:"decimal"}),", ",(0,r.jsx)(n.code,{children:"integer"}),", ",(0,r.jsx)(n.code,{children:"string"}),", ",(0,r.jsx)(n.code,{children:"Coding"}),", ",(0,r.jsx)(n.code,{children:"CodeableConcept"}),", ",(0,r.jsx)(n.code,{children:"Address"}),",\n",(0,r.jsx)(n.code,{children:"Identifier"}),",\n",(0,r.jsx)(n.code,{children:"Reference"}),") The list of types that are encoded within open types,\nsuch as extensions. This default list was taken from the data types that are\ncommon to extensions found in widely-used IGs, such as the US and AU base\nprofiles. In general, you will get the best query performance by encoding your\ndata with the shortest possible list."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"storage",children:"Storage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.storage.warehouseUrl"})," - (default: ",(0,r.jsx)(n.code,{children:"file:///usr/share/warehouse"}),") The\nbase URL at which Pathling will look for data files, and where it will save\ndata received within ",(0,r.jsx)(n.a,{href:"./operations/import",children:"import"})," requests. Can be an\n",(0,r.jsx)(n.a,{href:"https://aws.amazon.com/s3/",children:"Amazon S3"})," (",(0,r.jsx)(n.code,{children:"s3a://"}),"),\n",(0,r.jsx)(n.a,{href:"https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html",children:"HDFS"})," (",(0,r.jsx)(n.code,{children:"hdfs://"}),") or\nfilesystem (",(0,r.jsx)(n.code,{children:"file://"}),") URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.storage.databaseName"})," - (default: ",(0,r.jsx)(n.code,{children:"default"}),") The subdirectory within\nthe warehouse path used to read and write data."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.storage.cacheDatasets"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") This controls whether the\nbuilt-in caching within Spark is used for resource datasets. It may be useful\nto turn this off for large datasets in memory-constrained environments."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.storage.compactionThreshold"})," - (default: ",(0,r.jsx)(n.code,{children:"10"}),") When a table is\nupdated, the number of partitions is checked. If the number exceeds this\nthreshold, the table will be repartitioned back to the default number of\npartitions. This prevents large numbers of small updates causing poor\nsubsequent query performance."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Pathling will automatically detect AWS authentication details within the\nenvironment and use them to access S3 buckets. It uses a chain of authentication\nmethods,\nsee ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html",children:"DefaultAWSCredentialsProviderChain"}),"\nfor details."]}),"\n",(0,r.jsxs)(n.p,{children:["In addition to this, any Hadoop S3 configuration variable (",(0,r.jsx)(n.code,{children:"fs.s3a.*"}),") can be\nset within Pathling directly. See\nthe ",(0,r.jsx)(n.a,{href:"https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html",children:"Hadoop AWS documentation"}),"\nfor all the possible options."]}),"\n",(0,r.jsx)(n.p,{children:"This is the default S3 configuration, along with some hints on how to add some\ncommon configuration parameters:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"fs:\n    s3a:\n        aws:\n            # credentials:\n            #   provider: org.apache.hadoop.fs.s3a.AnonymousAWSCredentialsProvider\n            #   provider: org.apache.hadoop.fs.s3a.auth.AssumedRoleCredentialProvider\n            #\n            # For use with: SimpleAWSCredentialsProvider\n            # access:\n            #   key: [access key]\n            # secret:\n            #   key: [secret key]\n            #\n            # For use with: AssumedRoleCredentialProvider\n            # assumed:\n            #   role:\n            #     arn: [role ARN]\n            #\n            connection:\n                maximum: 100\n            committer:\n                name: magic\n                magic:\n                    enabled: true\n"})}),"\n",(0,r.jsx)(n.h3,{id:"query",children:"Query"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.query.explainQueries"})," - (default: ",(0,r.jsx)(n.code,{children:"false"}),") If set to true, Spark\nquery plans will be written to the logs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.query.cacheResults"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") This controls whether the\nbuilt-in caching within Spark is used for search results. It may be useful to\nturn this off for large datasets in memory-constrained environments."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"apache-spark",children:"Apache Spark"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.spark.appName"})," - (default: ",(0,r.jsx)(n.code,{children:"pathling"}),") Controls the application name\nthat Pathling will be identified as within any Spark cluster that it\nparticipates in."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Any Spark configuration variable can be set within Pathling directly. See\n",(0,r.jsx)(n.a,{href:"https://spark.apache.org/docs/latest/configuration.html",children:"Spark Configuration"}),"\nfor the full list."]}),"\n",(0,r.jsx)(n.p,{children:"Here are a few that you might be particularly interested in:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"spark.master"})," - (default: ",(0,r.jsx)(n.code,{children:"local[*]"}),") Address of the master node of an\n",(0,r.jsx)(n.a,{href:"https://spark.apache.org/",children:"Apache Spark"})," cluster to use for processing data,\nsee ",(0,r.jsx)(n.a,{href:"https://spark.apache.org/docs/latest/submitting-applications.html#master-urls",children:"Master URLs"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"spark.executor.memory"})," - (default: ",(0,r.jsx)(n.code,{children:"1g"}),") The quantity of memory available for\neach child task to process data within, in the same format as JVM memory\nstrings with a size unit suffix (",(0,r.jsx)(n.code,{children:"k"}),", ",(0,r.jsx)(n.code,{children:"m"}),", ",(0,r.jsx)(n.code,{children:"g"})," or ",(0,r.jsx)(n.code,{children:"t"}),") (e.g. ",(0,r.jsx)(n.code,{children:"512m"}),", ",(0,r.jsx)(n.code,{children:"2g"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"spark.sql.shuffle.partitions"})," - (default: ",(0,r.jsx)(n.code,{children:"2"}),") This option controls the\nnumber of data partitions used to distribute data between child tasks. This\ncan be tuned to higher numbers for larger data sets. It also controls the\ngranularity of requests made to the configured terminology service."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This is the default Spark configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spark:\n    master: local[*]\n    sql:\n        adaptive:\n            enabled: true\n            coalescePartitions:\n                enabled: true\n        extensions: io.delta.sql.DeltaSparkSessionExtension\n        catalog:\n            spark_catalog: org.apache.spark.sql.delta.catalog.DeltaCatalog\n    databricks:\n        delta:\n            schema:\n                autoMerge:\n                    enabled: false\n    scheduler:\n        mode: FAIR\n"})}),"\n",(0,r.jsx)(n.h3,{id:"terminology-service",children:"Terminology service"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.enabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables use of terminology\nfunctions within queries."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.serverUrl"})," - (default:\n",(0,r.jsx)(n.code,{children:"https://tx.ontoserver.csiro.au/fhir"}),") The endpoint of the\n",(0,r.jsx)(n.a,{href:"https://hl7.org/fhir/R4/terminology-service.html",children:"FHIR terminology service"}),"\n(R4) that the server can use to resolve terminology queries."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.verboseLogging"})," - (default: ",(0,r.jsx)(n.code,{children:"false"}),") Setting this option\nto ",(0,r.jsx)(n.code,{children:"true"})," will enable additional logging of the details of requests between\nthe server and the terminology service."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.acceptLanguage"})," - If this variable is set, it will be\nused as the value of the ",(0,r.jsx)(n.code,{children:"Accept-Language"})," HTTP header passed to the\nterminology\nserver. The value may contain multiple languages, with weighted preferences\nas defined in\n",(0,r.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc9110.html#name-accept-language",children:"RFC 9110"}),".\nIf not provided, the header is not sent.\nThe server can use the header to return the result in the preferred language\nif it is able. The actual behaviour may depend on the server implementation\nand the code systems used."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"client",children:"Client"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.client.maxConnectionsTotal"})," - (default: ",(0,r.jsx)(n.code,{children:"32"}),") The\nmaximum number of total connections allowed from the client."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.client.maxConnectionsPerRoute"})," - (default: ",(0,r.jsx)(n.code,{children:"16"}),") The\nmaximum number of connections allowed from the client, per route."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.client.socketTimeout"})," - (default: ",(0,r.jsx)(n.code,{children:"60000"}),") The maximum\nperiod (in milliseconds) that the server should wait for incoming data from\nthe terminology service."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.client.retryEnabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Enables\nautomatic retry of failed terminology service requests."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.client.retryCount"})," - (default: ",(0,r.jsx)(n.code,{children:"2"}),") The maximum\nnumber of times that failed terminology service requests should be retried."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"cache",children:"Cache"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.cache.enabled"})," - (default: ",(0,r.jsx)(n.code,{children:"true"}),") Set this to false to\ndisable caching of terminology requests (not recommended)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.cache.storageType"})," - (default: ",(0,r.jsx)(n.code,{children:"memory"}),") The type of\nstorage to be used by the terminology cache. Valid values are ",(0,r.jsx)(n.code,{children:"memory"})," and\n",(0,r.jsx)(n.code,{children:"disk"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.cache.maxEntries"})," - (default: ",(0,r.jsx)(n.code,{children:"50000"}),") Sets the maximum\nnumber of entries that will be held in memory. Only applicable when using\nthe ",(0,r.jsx)(n.code,{children:"memory"})," storage type."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.cache.storagePath"})," - The path at which to store cache\ndata. Required if ",(0,r.jsx)(n.code,{children:"pathling.terminology.cache.storageType"})," is set to ",(0,r.jsx)(n.code,{children:"disk"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.cache.defaultExpiry"})," - (default: ",(0,r.jsx)(n.code,{children:"600"}),") The amount\nof time (in seconds) that a response from the terminology server should be\ncached if the server does not specify an expiry."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.cache.overrideExpiry"})," - If provided, this value\noverrides the expiry time provided by the terminology server."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.authentication.enabled"})," - (default: ",(0,r.jsx)(n.code,{children:"false"}),") Enables\nauthentication for requests to the terminology service."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.terminology.authentication.tokenEndpoint"}),",\n",(0,r.jsx)(n.code,{children:"pathling.terminology.authentication.clientId"}),",\n",(0,r.jsx)(n.code,{children:"pathling.terminology.authentication.clientSecret"})," - Authentication details\nfor connecting to a terminology service that requires authentication, using\n",(0,r.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-4.4",children:"OAuth 2.0 client credentials flow"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"authorization",children:"Authorization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.auth.enabled"})," - (default: ",(0,r.jsx)(n.code,{children:"false"}),") Enables authorization. If this\noption is set to ",(0,r.jsx)(n.code,{children:"true"}),", ",(0,r.jsx)(n.code,{children:"pathling.auth.issuer"})," and\n",(0,r.jsx)(n.code,{children:"pathling.auth.audience"})," options must also be set."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.auth.issuer"})," - Configures the issuing domain for bearer tokens, e.g.\n",(0,r.jsx)(n.code,{children:"https://pathling.au.auth0.com/"}),". Must match the contents of\nthe ",(0,r.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc7519#section-4.1.1",children:"issuer claim"}),"\nwithin bearer tokens."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.auth.audience"})," - Configures the audience for bearer tokens, which is\nthe FHIR endpoint that tokens are intended to be authorised for, e.g.\n",(0,r.jsx)(n.code,{children:"https://pathling.csiro.au/fhir"}),". Must match the contents of the\n",(0,r.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc7519#section-4.1.3",children:"audience claim"}),"\nwithin bearer tokens."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.auth.capabilities"})," - (default: ",(0,r.jsx)(n.code,{children:"launch-standalone"}),") A list of\n",(0,r.jsx)(n.a,{href:"https://hl7.org/fhir/smart-app-launch/conformance.html",children:"SMART on FHIR capabilities"}),"\nto advertise in the SMART configuration document at\n",(0,r.jsx)(n.code,{children:"/.well-known/smart-configuration"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.auth.grantTypesSupported"})," - (default: ",(0,r.jsx)(n.code,{children:"authorization_code"}),") A list\nof OAuth 2.0 grant types supported at the token endpoint, e.g.\n",(0,r.jsx)(n.code,{children:"authorization_code"}),", ",(0,r.jsx)(n.code,{children:"client_credentials"}),", ",(0,r.jsx)(n.code,{children:"refresh_token"}),". See\n",(0,r.jsx)(n.a,{href:"https://hl7.org/fhir/smart-app-launch/conformance.html",children:"SMART App Launch Conformance"}),"\nfor more details."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.auth.codeChallengeMethodsSupported"})," - (default: ",(0,r.jsx)(n.code,{children:"S256"}),") A list of\nPKCE code challenge methods supported. Must include ",(0,r.jsx)(n.code,{children:"S256"})," and must not\ninclude ",(0,r.jsx)(n.code,{children:"plain"})," as per the SMART specification."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"admin-ui",children:"Admin UI"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.adminUi.clientId"})," - The OAuth client ID for the admin UI. When set,\nthis value is included in the SMART configuration response at\n",(0,r.jsx)(n.code,{children:"/.well-known/smart-configuration"})," as ",(0,r.jsx)(n.code,{children:"admin_ui_client_id"}),". The admin UI uses\nthis value when initiating OAuth flows. If not set, the UI falls back to the\n",(0,r.jsx)(n.code,{children:"VITE_CLIENT_ID"})," environment variable (set at build time), then to the default\nvalue ",(0,r.jsx)(n.code,{children:"pathling-admin-ui"}),". See ",(0,r.jsx)(n.a,{href:"./admin-ui",children:"Admin UI"})," for more details."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"http-caching",children:"HTTP caching"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.httpCaching.vary"})," - (default: ",(0,r.jsx)(n.code,{children:"Accept"}),", ",(0,r.jsx)(n.code,{children:"Accept-Encoding"}),", ",(0,r.jsx)(n.code,{children:"Prefer"}),",\n",(0,r.jsx)(n.code,{children:"Authorization"}),") A list of values to return within the ",(0,r.jsx)(n.code,{children:"Vary"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.httpCaching.cacheableControl"})," - (default: ",(0,r.jsx)(n.code,{children:"must-revalidate"}),",\n",(0,r.jsx)(n.code,{children:"max-age=1"}),") A list of values to return within the ",(0,r.jsx)(n.code,{children:"Cache-Control"})," header, for\ncacheable responses."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.httpCaching.uncacheableControl"})," - (default: ",(0,r.jsx)(n.code,{children:"no-store"}),") A list of\nvalues to return within the ",(0,r.jsx)(n.code,{children:"Cache-Control"})," header, for uncacheable responses."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cross-origin-resource-sharing-cors",children:"Cross-Origin Resource Sharing (CORS)"}),"\n",(0,r.jsxs)(n.p,{children:["See the\n",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",children:"Cross-Origin Resource Sharing"}),"\nspecification for more information about the meaning of the different headers\nthat are controlled by this configuration."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.cors.allowedOriginPatterns"})," - (default: ",(0,r.jsx)(n.code,{children:"[empty]"}),") This is a\ncomma-delimited list of domain name patterns that controls which domains are\npermitted to access the server per the ",(0,r.jsx)(n.code,{children:"Access-Control-Allow-Origin"})," header.\nSupports wildcard patterns, e.g. ",(0,r.jsx)(n.code,{children:"https://*.somedomain.com"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.cors.allowedMethods"})," - (default: ",(0,r.jsx)(n.code,{children:"OPTIONS,GET,POST"}),") This is a\ncomma-delimited list of HTTP methods permitted via the\n",(0,r.jsx)(n.code,{children:"Access-Control-Allow-Methods"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.cors.allowedHeaders"})," - (default:\n",(0,r.jsx)(n.code,{children:"Content-Type,Authorization,Prefer"}),")\nThis is a comma-delimited list of HTTP headers permitted via the\n",(0,r.jsx)(n.code,{children:"Access-Control-Allow-Headers"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.cors.exposedHeaders"})," - (default:\n",(0,r.jsx)(n.code,{children:"Content-Location,Content-Disposition,X-Progress"}),")\nThis is a comma-delimited list of HTTP headers that are permitted to be\nexposed via\nthe ",(0,r.jsx)(n.code,{children:"Access-Control-Expose-Headers"})," header."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.cors.maxAge"})," - (default: ",(0,r.jsx)(n.code,{children:"600"}),") Controls how long the results of a\npreflight request can be cached via the ",(0,r.jsx)(n.code,{children:"Access-Control-Max-Age"})," header."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.sentryDsn"})," - If this variable is set, all errors will be reported to\na ",(0,r.jsx)(n.a,{href:"https://sentry.io",children:"Sentry"})," service, e.g. ",(0,r.jsx)(n.code,{children:"https://abc123@sentry.io/123456"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathling.sentryEnvironment"})," - If this variable is set, this will be sent as\nthe environment when reporting errors to Sentry."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"server-base",children:"Server base"}),"\n",(0,r.jsx)(n.p,{children:"There are a number of operations within the Pathling FHIR API that pass back\nURLs referring back to API endpoints. The host and protocol components of these\nURLs are automatically detected based upon the details of the incoming request."}),"\n",(0,r.jsxs)(n.p,{children:["In some cases it might be desirable to override the hostname and protocol,\nparticularly where Pathling is being hosted behind some sort of proxy. To\naccount for this, Pathling also supports the use of the\n",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto",children:"X-Forwarded-Proto"}),",\n",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host",children:"X-Forwarded-Host"}),"\nand ",(0,r.jsx)(n.code,{children:"X-Forwarded-Port"})," headers to override the protocol, hostname and port\nwithin URLs sent back by the API."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var t=i(6540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);