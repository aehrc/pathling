"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[7546],{7331(e,r,n){n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"server/operations/search","title":"Search","description":"Pathling supports FHIRPath-based search, allowing you to retrieve FHIR resources filtered by one or more FHIRPath expressions.","source":"@site/docs/server/operations/search.md","sourceDirName":"server/operations","slug":"/server/operations/search","permalink":"/docs/server/operations/search","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/docs/server/operations/search.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"Pathling supports FHIRPath-based search, allowing you to retrieve FHIR resources filtered by one or more FHIRPath expressions."},"sidebar":"server","previous":{"title":"Bulk submit","permalink":"/docs/server/operations/bulk-submit"},"next":{"title":"CRUD","permalink":"/docs/server/operations/crud"}}');var s=n(4848),t=n(8453);const a={sidebar_position:5,description:"Pathling supports FHIRPath-based search, allowing you to retrieve FHIR resources filtered by one or more FHIRPath expressions."},o="Search",l={},h=[{value:"Request",id:"request",level:2},{value:"Response",id:"response",level:2},{value:"Examples",id:"examples",level:2},{value:"Simple filter",id:"simple-filter",level:3},{value:"AND logic",id:"and-logic",level:3},{value:"OR logic",id:"or-logic",level:3},{value:"Complex expressions",id:"complex-expressions",level:3},{value:"Using FHIRPath operators",id:"using-fhirpath-operators",level:3}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"search",children:"Search"})}),"\n",(0,s.jsxs)(r.p,{children:["Pathling extends the search capabilities of FHIR using FHIRPath expressions for\nfiltering. This allows you to retrieve a set of FHIR resources from the server\nfiltered by one or more ",(0,s.jsx)(r.a,{href:"/docs/fhirpath",children:"FHIRPath"})," expressions."]}),"\n",(0,s.jsx)(r.p,{children:"Each expression is evaluated against each resource, returning a Boolean value\nwhich determines whether the resource will be included in the search result."}),"\n",(0,s.jsxs)(r.p,{children:["This is implemented as a ",(0,s.jsx)(r.a,{href:"https://hl7.org/fhir/R4/search.html#advanced",children:"named query"}),"\ncalled ",(0,s.jsx)(r.code,{children:"fhirPath"}),". Multiple instances of the ",(0,s.jsx)(r.code,{children:"filter"})," parameter are combined\nusing Boolean AND logic, and multiple expressions can be provided within a\nsingle parameter and delimited by commas to achieve OR logic. In addition to\nthis, ",(0,s.jsx)(r.a,{href:"https://hl7.org/fhirpath/#boolean-logic",children:"FHIRPath boolean operators"})," can\nbe used within expressions."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"GET [FHIR endpoint]/[resource type]?_query=fhirPath&filter=[FHIRPath expression]...\n"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"POST [FHIR endpoint]/[resource type]/_search\n"})}),"\n",(0,s.jsx)(r.h2,{id:"request",children:"Request"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"filter"})," parameter is used to specify FHIRPath expressions:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"filter [1..*]"})," - (string) A FHIRPath expression that can be evaluated against\neach resource in the data set to determine whether it is included within the\nresult. The context is an individual resource of the type that the search is\nbeing invoked against. The expression must evaluate to a Boolean value."]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Parameters are passed in the query portion of the URL for GET requests, and can\nbe passed either in the URL or in an ",(0,s.jsx)(r.code,{children:"application/x-www-form-urlencoded"})," body\nfor POST requests."]}),"\n",(0,s.jsx)(r.h2,{id:"response",children:"Response"}),"\n",(0,s.jsxs)(r.p,{children:["Any search request in FHIR returns a\n",(0,s.jsx)(r.a,{href:"https://hl7.org/fhir/R4/bundle.html",children:"Bundle"})," of matching resources."]}),"\n",(0,s.jsxs)(r.p,{children:["Pagination links are included for responses which include a large number of\nresources. The number of resources returned in a single response is 100 by\ndefault \u2014 this can be altered using the ",(0,s.jsx)(r.code,{children:"_count"})," parameter."]}),"\n",(0,s.jsxs)(r.p,{children:["See ",(0,s.jsx)(r.a,{href:"https://hl7.org/fhir/R4/search.html",children:"Search"})," in the FHIR specification for\nmore details."]}),"\n",(0,s.jsx)(r.p,{children:"Example response:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n    "resourceType": "Bundle",\n    "type": "searchset",\n    "total": 2,\n    "link": [\n        {\n            "relation": "self",\n            "url": "http://localhost:8080/fhir/Patient?_query=fhirPath&filter=gender%3D\'male\'"\n        }\n    ],\n    "entry": [\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-1",\n                "gender": "male",\n                "birthDate": "1970-01-01"\n            }\n        },\n        {\n            "resource": {\n                "resourceType": "Patient",\n                "id": "patient-2",\n                "gender": "male",\n                "birthDate": "1985-06-15"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(r.h3,{id:"simple-filter",children:"Simple filter"}),"\n",(0,s.jsx)(r.p,{children:"Retrieve all male patients:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=gender%3D'male'\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,s.jsx)(r.code,{children:"gender='male'"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"and-logic",children:"AND logic"}),"\n",(0,s.jsxs)(r.p,{children:["Retrieve female patients who are active (multiple ",(0,s.jsx)(r.code,{children:"filter"})," parameters):"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=gender%3D'female'&filter=active%3Dtrue\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,s.jsx)(r.code,{children:"gender='female'"})," and ",(0,s.jsx)(r.code,{children:"active=true"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"or-logic",children:"OR logic"}),"\n",(0,s.jsx)(r.p,{children:"Retrieve patients who are either male or female (comma-separated within single\nparameter):"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=gender%3D'male'%2Cgender%3D'female'\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,s.jsx)(r.code,{children:"gender='male',gender='female'"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"complex-expressions",children:"Complex expressions"}),"\n",(0,s.jsx)(r.p,{children:"Retrieve patients born after 1980:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"GET /fhir/Patient?_query=fhirPath&filter=birthDate%20%3E%20%401980-01-01\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,s.jsx)(r.code,{children:"birthDate > @1980-01-01"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"using-fhirpath-operators",children:"Using FHIRPath operators"}),"\n",(0,s.jsx)(r.p,{children:"Retrieve observations with a specific code and value above threshold:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"GET /fhir/Observation?_query=fhirPath&filter=code.coding.code%3D'8867-4'%20and%20valueQuantity.value%20%3E%20100\n"})}),"\n",(0,s.jsxs)(r.p,{children:["This is the URL-encoded form of ",(0,s.jsx)(r.code,{children:"code.coding.code='8867-4' and valueQuantity.value > 100"}),"."]})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,r,n){n.d(r,{R:()=>a,x:()=>o});var i=n(6540);const s={},t=i.createContext(s);function a(e){const r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);