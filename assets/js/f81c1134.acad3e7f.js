"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[8130],{7735:e=>{e.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"new-pathling-server","metadata":{"permalink":"/blog/new-pathling-server","editUrl":"https://github.com/aehrc/pathling/tree/main/site/blog/2026-01-05-new-pathling-server.md","source":"@site/blog/2026-01-05-new-pathling-server.md","title":"Introducing the new Pathling server","description":"We\'re excited to announce the release of a new Pathling server. This is a","date":"2026-01-05T00:00:00.000Z","tags":[{"inline":true,"label":"release","permalink":"/blog/tags/release"},{"inline":true,"label":"server","permalink":"/blog/tags/server"}],"readingTime":6.48,"hasTruncateMarker":true,"authors":[{"name":"John Grimes","url":"https://github.com/johngrimes","key":"johngrimes","page":null}],"frontMatter":{"slug":"new-pathling-server","title":"Introducing the new Pathling server","authors":["johngrimes"],"tags":["release","server"]},"unlisted":false,"nextItem":{"title":"Welcome to the Pathling blog","permalink":"/blog/welcome"}},"content":"We\'re excited to announce the release of a new Pathling server. This is a\\nground-up redesign that brings SQL on FHIR support, a web-based administration\\ninterface, Kubernetes deployment via Helm, and comprehensive bulk data\\noperations.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Background\\n\\nEarlier versions of Pathling included a server component with custom operations\\nlike `$aggregate` and `$extract` for analytics queries. While these were\\npowerful, they were Pathling-specific and didn\'t interoperate with other\\nsystems.\\n\\nWith the [v8.0.0 release](https://github.com/aehrc/pathling/releases/tag/v8.0.0),\\nwe removed the server to focus on the core libraries. Now the server is back,\\nrebuilt with a standards-based approach and versioned independently from the\\nlibraries (starting at 1.0.0).\\n\\nThe new server exclusively depends on the `library-runtime` module, which\\nprovides a much looser coupling to the core Pathling libraries. This makes the\\nserver lighter and more maintainable.\\n\\n## What is Pathling server?\\n\\nPathling server is a [FHIR R4](https://hl7.org/fhir/R4/) analytics server that\\naccepts data from multiple sources, stores it in an optimised data warehouse,\\nand exposes powerful query and export capabilities. It\'s built on\\n[Apache Spark](https://spark.apache.org/) for distributed processing and\\nsupports both single-node and cluster deployments.\\n\\n## SQL on FHIR\\n\\nThe headline feature is support for the\\n[SQL on FHIR](https://sql-on-fhir.org/) specification.\\nThis replaces the previous `$aggregate` and `$extract` operations with a\\nstandards-based approach that works across implementations\u2014ViewDefinitions\\ncreated for Pathling will work on any SQL on FHIR compliant system.\\n\\nViewDefinitions are portable, declarative definitions that specify how to\\nflatten hierarchical FHIR resources into rows and columns.\\n\\n### ViewDefinitions\\n\\nA ViewDefinition specifies which resource type to query and how to extract\\ncolumns using FHIRPath expressions:\\n\\n```json\\n{\\n    \\"resourceType\\": \\"ViewDefinition\\",\\n    \\"name\\": \\"patient_demographics\\",\\n    \\"resource\\": \\"Patient\\",\\n    \\"status\\": \\"active\\",\\n    \\"select\\": [\\n        {\\n            \\"column\\": [\\n                { \\"name\\": \\"id\\", \\"path\\": \\"id\\" },\\n                { \\"name\\": \\"family\\", \\"path\\": \\"name.first().family\\" },\\n                { \\"name\\": \\"given\\", \\"path\\": \\"name.first().given.first()\\" },\\n                { \\"name\\": \\"gender\\", \\"path\\": \\"gender\\" },\\n                { \\"name\\": \\"birth_date\\", \\"path\\": \\"birthDate\\" }\\n            ]\\n        }\\n    ]\\n}\\n```\\n\\n### Running views interactively\\n\\nThe `$viewdefinition-run` operation executes a ViewDefinition and returns\\nresults synchronously. This is ideal for interactive exploration and testing:\\n\\n```bash\\ncurl -X POST \'http://localhost:8080/fhir/$viewdefinition-run\' \\\\\\n  -H \'Content-Type: application/fhir+json\' \\\\\\n  -H \'Accept: application/x-ndjson\' \\\\\\n  -d \'{\\n    \\"resourceType\\": \\"Parameters\\",\\n    \\"parameter\\": [\\n      {\\n        \\"name\\": \\"viewResource\\",\\n        \\"resource\\": {\\n          \\"resourceType\\": \\"ViewDefinition\\",\\n          \\"name\\": \\"patient_demographics\\",\\n          \\"resource\\": \\"Patient\\",\\n          \\"status\\": \\"active\\",\\n          \\"select\\": [\\n            {\\n              \\"column\\": [\\n                { \\"name\\": \\"id\\", \\"path\\": \\"id\\" },\\n                { \\"name\\": \\"family\\", \\"path\\": \\"name.first().family\\" }\\n              ]\\n            }\\n          ]\\n        }\\n      }\\n    ]\\n  }\'\\n```\\n\\nThe response is newline-delimited JSON:\\n\\n```\\n{\\"id\\":\\"patient-1\\",\\"family\\":\\"Smith\\"}\\n{\\"id\\":\\"patient-2\\",\\"family\\":\\"Jones\\"}\\n```\\n\\nYou can also request CSV output by setting `Accept: text/csv`.\\n\\n### Exporting views at scale\\n\\nFor larger datasets, use `$viewdefinition-export` to run views asynchronously\\nand export results to files. This operation supports multiple output formats:\\n\\n- **NDJSON** \u2013 newline-delimited JSON\\n- **CSV** \u2013 comma-separated values\\n- **Parquet** \u2013 columnar format for efficient analytics\\n\\n```bash\\ncurl -X POST \'http://localhost:8080/fhir/$viewdefinition-export\' \\\\\\n  -H \'Content-Type: application/fhir+json\' \\\\\\n  -H \'Accept: application/fhir+json\' \\\\\\n  -H \'Prefer: respond-async\' \\\\\\n  -d \'{\\n    \\"resourceType\\": \\"Parameters\\",\\n    \\"parameter\\": [\\n      {\\n        \\"name\\": \\"viewResource\\",\\n        \\"resource\\": { \\"...ViewDefinition...\\" }\\n      },\\n      {\\n        \\"name\\": \\"_outputFormat\\",\\n        \\"valueString\\": \\"application/vnd.apache.parquet\\"\\n      }\\n    ]\\n  }\'\\n```\\n\\nThe server returns a `202 Accepted` response with a `Content-Location` header\\npointing to a status endpoint. Poll this endpoint until the job completes, then\\ndownload the result files.\\n\\n## Bulk data operations\\n\\n### Import\\n\\nThe `$import` operation loads FHIR data from external sources into the server.\\nSupported formats include:\\n\\n| Format  | MIME type                        |\\n| ------- | -------------------------------- |\\n| NDJSON  | `application/fhir+ndjson`        |\\n| Parquet | `application/vnd.apache.parquet` |\\n\\nData can be loaded from Amazon S3 (`s3a://`), HDFS, or the local filesystem.\\n\\n```bash\\ncurl -X POST \'http://localhost:8080/fhir/$import\' \\\\\\n  -H \'Content-Type: application/json\' \\\\\\n  -H \'Prefer: respond-async\' \\\\\\n  -d \'{\\n    \\"inputFormat\\": \\"application/fhir+ndjson\\",\\n    \\"input\\": [\\n      { \\"type\\": \\"Patient\\", \\"url\\": \\"s3a://my-bucket/Patient.ndjson\\" },\\n      { \\"type\\": \\"Observation\\", \\"url\\": \\"s3a://my-bucket/Observation.ndjson\\" }\\n    ],\\n    \\"mode\\": \\"merge\\"\\n  }\'\\n```\\n\\nImport modes control how incoming data interacts with existing resources:\\n\\n- **overwrite** \u2013 replace all existing resources of each type\\n- **merge** \u2013 update existing resources by ID, add new ones\\n- **append** \u2013 add resources without modifying existing data\\n\\n### Synchronisation with remote servers\\n\\nThe `$import-pnp` (ping and pull) operation fetches data directly from a FHIR\\nserver that supports bulk export. Pathling initiates the export, polls for\\ncompletion, downloads the files, and imports them\u2014all in a single operation.\\n\\nThis enables scheduled synchronisation with source systems:\\n\\n```bash\\ncurl -X POST \'http://localhost:8080/fhir/$import-pnp\' \\\\\\n  -H \'Content-Type: application/fhir+json\' \\\\\\n  -H \'Prefer: respond-async\' \\\\\\n  -d \'{\\n    \\"resourceType\\": \\"Parameters\\",\\n    \\"parameter\\": [\\n      { \\"name\\": \\"exportUrl\\", \\"valueUrl\\": \\"https://source.example.com/fhir/$export\\" },\\n      { \\"name\\": \\"saveMode\\", \\"valueCode\\": \\"merge\\" }\\n    ]\\n  }\'\\n```\\n\\n### Export\\n\\nThe `$export` operation extracts data from the server using the\\n[FHIR Bulk Data Access](https://hl7.org/fhir/uv/bulkdata/) specification.\\nExports can be scoped to the entire system, a specific patient, or members of a\\nGroup:\\n\\n```bash\\n# System-level export\\ncurl -X GET \'http://localhost:8080/fhir/$export\' \\\\\\n  -H \'Accept: application/fhir+json\' \\\\\\n  -H \'Prefer: respond-async\'\\n\\n# Patient-level export\\ncurl -X GET \'http://localhost:8080/fhir/Patient/123/$export\' \\\\\\n  -H \'Accept: application/fhir+json\' \\\\\\n  -H \'Prefer: respond-async\'\\n\\n# Group-level export\\ncurl -X GET \'http://localhost:8080/fhir/Group/cohort/$export\' \\\\\\n  -H \'Accept: application/fhir+json\' \\\\\\n  -H \'Prefer: respond-async\'\\n```\\n\\n## CRUD operations and search\\n\\nThe server supports full CRUD operations on FHIR resources:\\n\\n```bash\\n# Create\\ncurl -X POST \'http://localhost:8080/fhir/Patient\' \\\\\\n  -H \'Content-Type: application/fhir+json\' \\\\\\n  -d \'{ \\"resourceType\\": \\"Patient\\", \\"name\\": [{ \\"family\\": \\"Smith\\" }] }\'\\n\\n# Read\\ncurl -X GET \'http://localhost:8080/fhir/Patient/123\'\\n\\n# Update\\ncurl -X PUT \'http://localhost:8080/fhir/Patient/123\' \\\\\\n  -H \'Content-Type: application/fhir+json\' \\\\\\n  -d \'{ \\"resourceType\\": \\"Patient\\", \\"id\\": \\"123\\", \\"name\\": [{ \\"family\\": \\"Jones\\" }] }\'\\n\\n# Delete\\ncurl -X DELETE \'http://localhost:8080/fhir/Patient/123\'\\n```\\n\\n### FHIRPath search\\n\\nSearch for resources using FHIRPath expressions instead of standard FHIR search\\nparameters. This provides more expressive filtering capabilities:\\n\\n```bash\\n# Find male patients\\ncurl \'http://localhost:8080/fhir/Patient?_query=fhirPath&filter=gender%3D%27male%27\'\\n\\n# Find patients born after 1980\\ncurl \'http://localhost:8080/fhir/Patient?_query=fhirPath&filter=birthDate%20%3E%20%401980-01-01\'\\n\\n# Find observations with specific code and value above threshold\\ncurl \'http://localhost:8080/fhir/Observation?_query=fhirPath&filter=code.coding.code%3D%278867-4%27%20and%20valueQuantity.value%20%3E%20100\'\\n```\\n\\nMultiple `filter` parameters are combined with AND logic. Comma-separated\\nexpressions within a single parameter use OR logic.\\n\\n## Web interface\\n\\nA new React-based web interface provides administrative access to the server:\\n\\n- **Dashboard** \u2013 view server information, supported resources, and available\\n  operations\\n- **Resources** \u2013 browse and search FHIR resources using FHIRPath expressions\\n- **SQL on FHIR** \u2013 execute ViewDefinitions interactively and export results\\n- **Import/Export** \u2013 manage bulk data operations\\n- **Authentication** \u2013 SMART on FHIR integration for protected servers\\n\\n![The SQL on FHIR interface showing a ViewDefinition and tabular results](/assets/images/sql-on-fhir-ui.png)\\n\\nThe UI is served directly by the server and requires no additional deployment.\\n\\n## Deployment\\n\\n### Docker\\n\\nStart a server with Docker:\\n\\n```bash\\ndocker run -p 8080:8080 ghcr.io/aehrc/pathling:1\\n```\\n\\nThe FHIR API is available at `http://localhost:8080/fhir` and the web UI at\\n`http://localhost:8080`.\\n\\n### Kubernetes with Helm\\n\\nFor production deployments, use the Helm chart:\\n\\n```bash\\nhelm repo add pathling https://pathling.csiro.au/helm\\nhelm repo update\\nhelm install pathling pathling/pathling\\n```\\n\\nThe chart supports both single-node and cluster deployments. In cluster mode,\\nthe driver pod spawns Spark executor pods on demand via the Kubernetes API:\\n\\n```yaml\\npathling:\\n    image: ghcr.io/aehrc/pathling:1\\n    resources:\\n        requests:\\n            cpu: 2\\n            memory: 4G\\n        limits:\\n            memory: 4G\\n    volumes:\\n        - name: warehouse\\n          persistentVolumeClaim:\\n              claimName: pathling-warehouse\\n    volumeMounts:\\n        - name: warehouse\\n          mountPath: /usr/share/warehouse\\n    config:\\n        pathling.implementationDescription: My Pathling Server\\n```\\n\\n### Caching\\n\\nA Varnish-based caching layer is available for deployments with high read\\ntraffic. The cache respects `Cache-Control` headers and can significantly reduce\\nload on the server for repeated queries.\\n\\n## Getting started\\n\\nPull the Docker image and start exploring:\\n\\n```bash\\ndocker run -p 8080:8080 ghcr.io/aehrc/pathling:1\\n```\\n\\nThen open `http://localhost:8080` in your browser to access the web UI, or use\\ncurl to interact with the FHIR API at `http://localhost:8080/fhir`.\\n\\nFor detailed documentation on all operations and configuration options, see the\\n[server documentation](/docs/server)."},{"id":"welcome","metadata":{"permalink":"/blog/welcome","editUrl":"https://github.com/aehrc/pathling/tree/main/site/blog/2026-01-05-welcome.md","source":"@site/blog/2026-01-05-welcome.md","title":"Welcome to the Pathling blog","description":"Welcome to the Pathling blog! This is where we will share news, updates, and","date":"2026-01-05T00:00:00.000Z","tags":[{"inline":true,"label":"announcement","permalink":"/blog/tags/announcement"}],"readingTime":0.19,"hasTruncateMarker":true,"authors":[{"name":"John Grimes","url":"https://github.com/johngrimes","key":"johngrimes","page":null}],"frontMatter":{"slug":"welcome","title":"Welcome to the Pathling blog","authors":["johngrimes"],"tags":["announcement"]},"unlisted":false,"prevItem":{"title":"Introducing the new Pathling server","permalink":"/blog/new-pathling-server"}},"content":"Welcome to the Pathling blog! This is where we will share news, updates, and\\ninsights about the Pathling project.\\n\\n\x3c!-- truncate --\x3e\\n\\nStay tuned for upcoming posts about new features, best practices for working\\nwith FHIR analytics, and community updates."}]}}')}}]);