"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[5260],{4851(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"fhirpath/extension-functions","title":"Extension functions","description":"Extension functions and data types implemented in Pathling in addition to the standard FHIRPath and FHIR specifications.","source":"@site/docs/fhirpath/extension-functions.md","sourceDirName":"fhirpath","slug":"/fhirpath/extension-functions","permalink":"/docs/fhirpath/extension-functions","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/docs/fhirpath/extension-functions.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"description":"Extension functions and data types implemented in Pathling in addition to the standard FHIRPath and FHIR specifications."},"sidebar":"fhirpath","previous":{"title":"FHIR-specific functions","permalink":"/docs/fhirpath/fhir-functions"}}');var o=i(4848),s=i(8453);const r={sidebar_position:3,description:"Extension functions and data types implemented in Pathling in addition to the standard FHIRPath and FHIR specifications."},a="Extension functions",d={},c=[{value:"designation",id:"designation",level:2},{value:"display",id:"display",level:2},{value:"property",id:"property",level:2},{value:"translate",id:"translate",level:2},{value:"Extension data types",id:"extension-data-types",level:2},{value:"Coding",id:"coding",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"extension-functions",children:"Extension functions"})}),"\n",(0,o.jsx)(n.p,{children:"The following functions have been implemented in Pathling in addition to the\nstandard set of functions within the FHIRPath and FHIR specifications."}),"\n",(0,o.jsx)(n.p,{children:"The notation used to describe the type signature of each function is as follows:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"[input type] -> [function name]([argument name]: [argument type], ...): [return type]\n"})}),"\n",(0,o.jsx)(n.h2,{id:"designation",children:"designation"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"collection<Coding -> designation(use: Coding, language: String) : collection<String>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["When invoked on a collection of ",(0,o.jsx)(n.a,{href:"#coding",children:"Coding"})," elements, returns\na collection of designation values from\nthe ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/codesystem-operation-lookup.html",children:"lookup"}),"\noperation. This can be used to retrieve synonyms, language translations and more\nfrom the underlying terminology."]}),"\n",(0,o.jsxs)(n.p,{children:["If the ",(0,o.jsx)(n.code,{children:"use"})," parameter is specified, designation values are filtered to only\nthose with a matching use. If the ",(0,o.jsx)(n.code,{children:"language"})," parameter is specified, designation\nvalues are filtered to only those with a matching language. If both are\nspecified, designation values must match both the specified use and language."]}),"\n",(0,o.jsxs)(n.p,{children:["See ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/codesystem.html#designations",children:"Display, Definition and Designations"}),"\nin the FHIR specification for more information."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"// Retrieve SNOMED CT synonyms.\nCondition.code.coding.designation(http://snomed.info/sct|900000000000013009)\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"designation"})," function is a terminology function, which means that it\nrequires a\nconfigured ",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/terminology-service.html",children:"terminology service"}),".\nSee ",(0,o.jsx)(n.a,{href:"/docs/libraries/terminology",children:"Terminology functions"})," for\ndetails."]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"designation"})," function is not within the FHIRPath specification, and is\ncurrently unique to the Pathling implementation."]})}),"\n",(0,o.jsx)(n.h2,{id:"display",children:"display"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"collection<Coding> -> display(language?: String) : collection<String>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["When invoked on a ",(0,o.jsx)(n.a,{href:"#coding",children:"Coding"}),", returns the preferred display\nterm, according to the terminology server."]}),"\n",(0,o.jsxs)(n.p,{children:["The optional ",(0,o.jsx)(n.code,{children:"language"})," parameter can be used to specify the preferred language\nfor the display name. It overrides the default value set in the configuration.\nSee ",(0,o.jsx)(n.a,{href:"/docs/libraries/terminology#multi-language-support",children:"Multi-language support"}),"\nfor details."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'// With no argument\nCondition.code.display()\n\n// Prefer German language.\nCondition.code.display("de")\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"display"})," function is a terminology function, which means that it requires\na configured\n",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/terminology-service.html",children:"terminology service"}),". See\n",(0,o.jsx)(n.a,{href:"/docs/libraries/terminology",children:"Terminology functions"})," for details."]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"display"})," function is not within the FHIRPath specification, and is\ncurrently unique to the Pathling implementation."]})}),"\n",(0,o.jsx)(n.h2,{id:"property",children:"property"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"collection<Coding> -> property(code: String, type: String = 'string', language?: String) : collection<String|Integer|DateTime|Decimal|Coding>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["When invoked on a ",(0,o.jsx)(n.a,{href:"#coding",children:"Coding"}),", returns any matching property\nvalues, using the specified ",(0,o.jsx)(n.code,{children:"name"})," and ",(0,o.jsx)(n.code,{children:"type"})," parameters."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"type"})," parameter has these possible values:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"string"})," (default)"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"code"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"Coding"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"integer"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"boolean"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"DateTime"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Both the ",(0,o.jsx)(n.code,{children:"code"})," and the ",(0,o.jsx)(n.code,{children:"type"})," of the property must be present within a\n",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/codesystem-operation-lookup.html",children:"lookup"})," response in\norder for it to be returned by this function. If there are no matches, the\nfunction will return an empty collection."]}),"\n",(0,o.jsxs)(n.p,{children:["The optional ",(0,o.jsx)(n.code,{children:"language"})," parameter can be used to specify the preferred language\nfor the returned property values. It overrides the default value set in the\nconfiguration. See\n",(0,o.jsx)(n.a,{href:"/docs/libraries/terminology#multi-language-support",children:"Multi-language support"}),"\nfor details."]}),"\n",(0,o.jsxs)(n.p,{children:["See ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/codesystem.html#properties",children:"Properties"}),"\nin the FHIR specification for more information."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"// Select the code-typed property \"parent\".\nCondition.code.coding.property('parent', 'code')\n\n// Select the \"parent\" property, preferring the German language.\nCondition.code.coding.property('parent', 'code', 'de')\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"property"})," function is a terminology function, which means that it requires\na configured\n",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/terminology-service.html",children:"terminology service"}),". See\n",(0,o.jsx)(n.a,{href:"/docs/libraries/terminology",children:"Terminology functions"})," for details."]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"property"})," function is not within the FHIRPath specification, and is\ncurrently unique to the Pathling implementation."]})}),"\n",(0,o.jsx)(n.h2,{id:"translate",children:"translate"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"collection<Coding|CodeableConcept> -> translate(conceptMapUrl: String, reverse: Boolean = false, equivalence: String = 'equivalent', target?: String) : collection<Coding>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["When invoked on a ",(0,o.jsx)(n.a,{href:"#coding",children:"Coding"}),", returns any\nmatching concepts using the ConceptMap specified using ",(0,o.jsx)(n.code,{children:"conceptMapUrl"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"reverse"})," parameter controls the direction to traverse the map - ",(0,o.jsx)(n.code,{children:"false"}),'\nresults in "source to target" mappings, while ',(0,o.jsx)(n.code,{children:"true"}),' results in "target to\nsource".']}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"equivalence"})," parameter is a comma-delimited set of values from\nthe ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/R4/valueset-concept-map-equivalence.html",children:"ConceptMapEquivalence"}),"\nValueSet, and is used to filter the mappings returned to only those that have an\nequivalence value in this list."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"target"})," parameter identifies the value set in which a translation is\nsought \u2014 a scope for the translation."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Condition.code.coding.translate('https://csiro.au/fhir/ConceptMap/some-map', true, 'equivalent,wider').display\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"translate"})," function is a terminology function, which means that it requires\na configured\n",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/terminology-service.html",children:"terminology service"}),". See\n",(0,o.jsx)(n.a,{href:"/docs/libraries/terminology",children:"Terminology functions"})," for details."]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"translate"})," function is not within the FHIRPath specification, and is\ncurrently unique to the Pathling implementation."]})}),"\n",(0,o.jsx)(n.h2,{id:"extension-data-types",children:"Extension data types"}),"\n",(0,o.jsx)(n.p,{children:"Pathling implements the following additions in the area of data types."}),"\n",(0,o.jsx)(n.h3,{id:"coding",children:"Coding"}),"\n",(0,o.jsxs)(n.p,{children:["A ",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/datatypes.html#Coding",children:"Coding"})," is a representation of\na defined concept using a symbol from a defined\n",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/codesystem.html",children:"code system"})," - see\n",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/terminologies.html",children:"Using Codes in resources"})," for more\ndetails."]}),"\n",(0,o.jsxs)(n.p,{children:["The Coding literal comprises a minimum of ",(0,o.jsx)(n.code,{children:"system"})," and ",(0,o.jsx)(n.code,{children:"code"}),", as well as\noptional ",(0,o.jsx)(n.code,{children:"version"}),", ",(0,o.jsx)(n.code,{children:"display"}),", ",(0,o.jsx)(n.code,{children:"userSelected"})," components:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"<system>|<code>[|<version>][|<display>[|<userSelected>]]]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Not all code systems require the use of a version to unambiguously specify a\ncode - see\n",(0,o.jsx)(n.a,{href:"https://hl7.org/fhir/R4/codesystem.html#versioning",children:"Versioning Code Systems"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"You can also optionally single-quote each of the components within the Coding\nliteral, in cases where certain characters might otherwise confuse the parser."}),"\n",(0,o.jsx)(n.p,{children:"Examples:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"http://snomed.info/sct|52101004\nhttp://snomed.info/sct|52101004||Present\nhttp://terminology.hl7.org/CodeSystem/condition-category|problem-list-item|4.0.1|'Problem List Item'\nhttp://snomed.info/sct|'397956004 |Prosthetic arthroplasty of the hip|: 363704007 |Procedure site| = ( 24136001 |Hip joint structure|: 272741003 |Laterality| =  7771000 |Left| )'\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"The Coding literal is not within the FHIRPath specification, and is currently\nunique to the Pathling implementation."})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var t=i(6540);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);