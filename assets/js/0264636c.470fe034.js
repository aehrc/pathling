"use strict";(globalThis.webpackChunkpathling_site=globalThis.webpackChunkpathling_site||[]).push([[8723],{7722:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"server/operations/view-export","title":"Export view","description":"The view export operation executes ViewDefinitions against FHIR data and exports the results to files in NDJSON, CSV, or Parquet format.","source":"@site/docs/server/operations/view-export.md","sourceDirName":"server/operations","slug":"/server/operations/view-export","permalink":"/docs/server/operations/view-export","draft":false,"unlisted":false,"editUrl":"https://github.com/aehrc/pathling/tree/main/site/docs/server/operations/view-export.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"description":"The view export operation executes ViewDefinitions against FHIR data and exports the results to files in NDJSON, CSV, or Parquet format."},"sidebar":"server","previous":{"title":"Run view","permalink":"/docs/server/operations/view-run"},"next":{"title":"Authorization","permalink":"/docs/server/authorization"}}');var r=t(4848),s=t(8453);const o={sidebar_position:8,description:"The view export operation executes ViewDefinitions against FHIR data and exports the results to files in NDJSON, CSV, or Parquet format."},a="Export view",d={},l=[{value:"Endpoint",id:"endpoint",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Asynchronous processing",id:"asynchronous-processing",level:2},{value:"Kick-off request",id:"kick-off-request",level:3},{value:"Kick-off response",id:"kick-off-response",level:3},{value:"Polling",id:"polling",level:3},{value:"Response manifest",id:"response-manifest",level:2},{value:"Manifest fields",id:"manifest-fields",level:3},{value:"Output formats",id:"output-formats",level:2},{value:"Multiple views",id:"multiple-views",level:2},{value:"Filtering",id:"filtering",level:2},{value:"Patient filter",id:"patient-filter",level:3},{value:"Group filter",id:"group-filter",level:3},{value:"Time filter",id:"time-filter",level:3},{value:"Comparison with run view",id:"comparison-with-run-view",level:2},{value:"Python example",id:"python-example",level:2},{value:"View export client",id:"view-export-client",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"export-view",children:"Export view"})}),"\n",(0,r.jsxs)(n.p,{children:["This operation executes one or more\n",(0,r.jsx)(n.a,{href:"https://build.fhir.org/ig/FHIR/sql-on-fhir-v2/StructureDefinition-ViewDefinition.html",children:"ViewDefinitions"}),"\nagainst FHIR data and exports the results to files. This implementation follows\nthe\n",(0,r.jsx)(n.a,{href:"https://build.fhir.org/ig/FHIR/sql-on-fhir-v2/OperationDefinition-ViewDefinitionExport.html",children:"SQL on FHIR specification"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Use this operation for large datasets that need to be exported asynchronously.\nFor smaller, synchronous queries, see the ",(0,r.jsx)(n.a,{href:"/docs/server/operations/view-run",children:"run view"})," operation."]}),"\n",(0,r.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST [base]/$viewdefinition-export\n"})}),"\n",(0,r.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Cardinality"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"view.name"})}),(0,r.jsx)(n.td,{children:"0..*"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Optional names for exported views. Used in output filenames."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"view.viewResource"})}),(0,r.jsx)(n.td,{children:"1..*"}),(0,r.jsx)(n.td,{children:"Resource"}),(0,r.jsx)(n.td,{children:"ViewDefinition resources to execute."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"clientTrackingId"})}),(0,r.jsx)(n.td,{children:"0..1"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Client-provided tracking identifier for correlation."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_format"})}),(0,r.jsx)(n.td,{children:"0..1"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsxs)(n.td,{children:["Output format: ",(0,r.jsx)(n.code,{children:"ndjson"})," (default), ",(0,r.jsx)(n.code,{children:"csv"}),", or ",(0,r.jsx)(n.code,{children:"parquet"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"header"})}),(0,r.jsx)(n.td,{children:"0..1"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsxs)(n.td,{children:["Include header row in CSV output. Defaults to ",(0,r.jsx)(n.code,{children:"true"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"patient"})}),(0,r.jsx)(n.td,{children:"0..*"}),(0,r.jsx)(n.td,{children:"id"}),(0,r.jsx)(n.td,{children:"Filter to resources for the specified patient(s)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"group"})}),(0,r.jsx)(n.td,{children:"0..*"}),(0,r.jsx)(n.td,{children:"id"}),(0,r.jsx)(n.td,{children:"Filter to resources for patients in the specified Group(s)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_since"})}),(0,r.jsx)(n.td,{children:"0..1"}),(0,r.jsx)(n.td,{children:"instant"}),(0,r.jsxs)(n.td,{children:["Only include resources where ",(0,r.jsx)(n.code,{children:"meta.lastUpdated"})," is at or after this time."]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"asynchronous-processing",children:"Asynchronous processing"}),"\n",(0,r.jsxs)(n.p,{children:["The view export operation uses the\n",(0,r.jsx)(n.a,{href:"https://hl7.org/fhir/R4/async.html",children:"FHIR Asynchronous Request Pattern"}),". Include\na ",(0,r.jsx)(n.code,{children:"Prefer: respond-async"})," header to initiate asynchronous processing."]}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant C as Client\n    participant P as Pathling\n    C->>P: POST /$viewdefinition-export (Prefer: respond-async)\n    P--\x3e>C: 202 Accepted + Content-Location\n    loop Poll for status\n        C->>P: GET [status URL]\n        P--\x3e>C: 202 Accepted (in progress)\n    end\n    C->>P: GET [status URL]\n    P--\x3e>C: 200 OK + manifest\n    C->>P: GET $result?job=...&file=...\n    P--\x3e>C: Exported data file"}),"\n",(0,r.jsx)(n.h3,{id:"kick-off-request",children:"Kick-off request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST [base]/$viewdefinition-export HTTP/1.1\nContent-Type: application/fhir+json\nAccept: application/fhir+json\nPrefer: respond-async\n\n{\n    "resourceType": "Parameters",\n    "parameter": [\n        {\n            "name": "view",\n            "part": [\n                {\n                    "name": "name",\n                    "valueString": "patient_demographics"\n                },\n                {\n                    "name": "viewResource",\n                    "resource": {\n                        "resourceType": "ViewDefinition",\n                        "name": "patient_demographics",\n                        "resource": "Patient",\n                        "status": "active",\n                        "select": [\n                            {\n                                "column": [\n                                    {"name": "id", "path": "id"},\n                                    {"name": "family", "path": "name.first().family"},\n                                    {"name": "given", "path": "name.first().given.first()"},\n                                    {"name": "gender", "path": "gender"},\n                                    {"name": "birth_date", "path": "birthDate"}\n                                ]\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"kick-off-response",children:"Kick-off response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"HTTP/1.1 202 Accepted\nContent-Location: [base]/$exportstatus/[job-id]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"polling",children:"Polling"}),"\n",(0,r.jsxs)(n.p,{children:["Poll the URL from ",(0,r.jsx)(n.code,{children:"Content-Location"})," until you receive a ",(0,r.jsx)(n.code,{children:"200 OK"})," response with\nthe export manifest."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"202 Accepted"})," \u2014 Export still in progress. Check ",(0,r.jsx)(n.code,{children:"X-Progress"})," header for status."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"200 OK"})," \u2014 Export complete. Response body contains the manifest."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"response-manifest",children:"Response manifest"}),"\n",(0,r.jsx)(n.p,{children:"When the export completes, the response contains a JSON manifest:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "transactionTime": "2025-01-15T10:30:00.000Z",\n    "request": "https://pathling.example.com/fhir/$viewdefinition-export",\n    "requiresAccessToken": true,\n    "output": [\n        {\n            "name": "patient_demographics",\n            "url": "https://pathling.example.com/fhir/$result?job=abc123&file=patient_demographics.ndjson"\n        }\n    ],\n    "error": []\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"manifest-fields",children:"Manifest fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"transactionTime"})}),(0,r.jsx)(n.td,{children:"The time the export was initiated"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"request"})}),(0,r.jsx)(n.td,{children:"The original kick-off request URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requiresAccessToken"})}),(0,r.jsx)(n.td,{children:"Whether authentication is required to download result files"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"output"})}),(0,r.jsx)(n.td,{children:"Array of exported files with view name and download URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"error"})}),(0,r.jsx)(n.td,{children:"Array of OperationOutcome files for any errors"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"output-formats",children:"Output formats"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Format"}),(0,r.jsxs)(n.th,{children:[(0,r.jsx)(n.code,{children:"_format"})," value"]}),(0,r.jsx)(n.th,{children:"Content type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"NDJSON"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ndjson"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"application/x-ndjson"})}),(0,r.jsx)(n.td,{children:"Newline-delimited JSON. Default format."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CSV"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"csv"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"text/csv"})}),(0,r.jsxs)(n.td,{children:["Comma-separated values. Use ",(0,r.jsx)(n.code,{children:"header=false"})," to exclude headers."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Parquet"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"parquet"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"application/vnd.apache.parquet"})}),(0,r.jsx)(n.td,{children:"Apache Parquet columnar format. Efficient for large datasets."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"multiple-views",children:"Multiple views"}),"\n",(0,r.jsxs)(n.p,{children:["Export multiple views in a single request by including multiple ",(0,r.jsx)(n.code,{children:"view"}),"\nparameters:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Parameters",\n    "parameter": [\n        {\n            "name": "view",\n            "part": [\n                {"name": "name", "valueString": "patients"},\n                {"name": "viewResource", "resource": {"resourceType": "ViewDefinition", "..."}}\n            ]\n        },\n        {\n            "name": "view",\n            "part": [\n                {"name": "name", "valueString": "conditions"},\n                {"name": "viewResource", "resource": {"resourceType": "ViewDefinition", "..."}}\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Each view produces a separate output file in the manifest."}),"\n",(0,r.jsx)(n.h2,{id:"filtering",children:"Filtering"}),"\n",(0,r.jsx)(n.h3,{id:"patient-filter",children:"Patient filter"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"patient"})," parameter to restrict results to resources associated with\nspecific patients:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Parameters",\n    "parameter": [\n        {\n            "name": "view",\n            "part": [\n                {"name": "viewResource", "resource": {"resourceType": "ViewDefinition", "..."}}\n            ]\n        },\n        {"name": "patient", "valueId": "patient-123"},\n        {"name": "patient", "valueId": "patient-456"}\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"group-filter",children:"Group filter"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"group"})," parameter to restrict results to resources for patients who are\nmembers of the specified Group:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Parameters",\n    "parameter": [\n        {\n            "name": "view",\n            "part": [\n                {"name": "viewResource", "resource": {"resourceType": "ViewDefinition", "..."}}\n            ]\n        },\n        {"name": "group", "valueId": "cohort-study-group"}\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"time-filter",children:"Time filter"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"_since"})," to only include resources updated after a specific time:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "resourceType": "Parameters",\n    "parameter": [\n        {\n            "name": "view",\n            "part": [\n                {"name": "viewResource", "resource": {"resourceType": "ViewDefinition", "..."}}\n            ]\n        },\n        {"name": "_since", "valueInstant": "2024-01-01T00:00:00Z"}\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"comparison-with-run-view",children:"Comparison with run view"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Export view"}),(0,r.jsx)(n.th,{children:"Run view"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Processing"}),(0,r.jsx)(n.td,{children:"Asynchronous with polling"}),(0,r.jsx)(n.td,{children:"Synchronous"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Output"}),(0,r.jsx)(n.td,{children:"Files (download via manifest URLs)"}),(0,r.jsx)(n.td,{children:"Streamed response"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multiple views"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Parquet format"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Use case"}),(0,r.jsx)(n.td,{children:"Large datasets, batch processing"}),(0,r.jsx)(n.td,{children:"Small queries, interactive use"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"python-example",children:"Python example"}),"\n",(0,r.jsx)(n.p,{children:"The following Python script demonstrates the complete view export workflow."}),"\n",(0,r.jsxs)(n.p,{children:["Run the script using ",(0,r.jsx)(n.a,{href:"https://docs.astral.sh/uv/",children:"uv"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uv run view_export_client.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"view-export-client",children:"View export client"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n# /// script\n# requires-python = ">=3.10"\n# dependencies = ["requests"]\n# ///\n"""Demonstrates the $viewdefinition-export operation with async polling."""\n\nimport os\nimport time\nimport requests\n\nBASE_URL = "https://pathling.example.com/fhir"\nOUTPUT_DIR = "./view_export"\n\n\ndef create_patient_view():\n    """Create a ViewDefinition for Patient demographics."""\n    return {\n        "resourceType": "ViewDefinition",\n        "name": "patient_demographics",\n        "resource": "Patient",\n        "status": "active",\n        "select": [\n            {\n                "column": [\n                    {"name": "id", "path": "id"},\n                    {"name": "family", "path": "name.first().family"},\n                    {"name": "given", "path": "name.first().given.first()"},\n                    {"name": "gender", "path": "gender"},\n                    {"name": "birth_date", "path": "birthDate"},\n                ]\n            }\n        ],\n    }\n\n\ndef create_condition_view():\n    """Create a ViewDefinition for Condition data."""\n    return {\n        "resourceType": "ViewDefinition",\n        "name": "conditions",\n        "resource": "Condition",\n        "status": "active",\n        "select": [\n            {\n                "column": [\n                    {"name": "id", "path": "id"},\n                    {"name": "patient_id", "path": "subject.getReferenceKey()"},\n                    {"name": "code", "path": "code.coding.first().code"},\n                    {"name": "display", "path": "code.coding.first().display"},\n                    {"name": "onset", "path": "onset.ofType(dateTime)"},\n                ]\n            }\n        ],\n    }\n\n\ndef kick_off_export(views, output_format="ndjson"):\n    """Initiate a view export."""\n    url = f"{BASE_URL}/$viewdefinition-export"\n\n    # Build Parameters resource with view definitions.\n    parameters = {\n        "resourceType": "Parameters",\n        "parameter": [],\n    }\n\n    for view in views:\n        parameters["parameter"].append({\n            "name": "view",\n            "part": [\n                {"name": "name", "valueString": view.get("name", "unnamed")},\n                {"name": "viewResource", "resource": view},\n            ],\n        })\n\n    parameters["parameter"].append({\n        "name": "_format",\n        "valueString": output_format,\n    })\n\n    headers = {\n        "Content-Type": "application/fhir+json",\n        "Accept": "application/fhir+json",\n        "Prefer": "respond-async",\n    }\n\n    response = requests.post(url, json=parameters, headers=headers)\n\n    if response.status_code == 202:\n        status_url = response.headers.get("Content-Location")\n        print(f"Export started, polling: {status_url}")\n        return status_url\n    else:\n        response.raise_for_status()\n\n\ndef poll_status(status_url, timeout=3600):\n    """Poll the status endpoint until export completes."""\n    start = time.time()\n    interval = 2.0\n\n    while time.time() - start < timeout:\n        response = requests.get(\n            status_url,\n            headers={"Accept": "application/fhir+json"},\n        )\n\n        if response.status_code == 200:\n            print("Export complete")\n            return response.json()\n        elif response.status_code == 202:\n            progress = response.headers.get("X-Progress", "unknown")\n            print(f"In progress: {progress}")\n            time.sleep(interval)\n            interval = min(interval * 1.5, 30.0)\n        else:\n            response.raise_for_status()\n\n    raise TimeoutError(f"Export timed out after {timeout} seconds")\n\n\ndef download_files(manifest, output_dir):\n    """Download all files from the export manifest."""\n    os.makedirs(output_dir, exist_ok=True)\n\n    for item in manifest.get("output", []):\n        name = item["name"]\n        url = item["url"]\n        # Extract extension from URL or default to ndjson.\n        ext = url.split(".")[-1] if "." in url.split("=")[-1] else "ndjson"\n        filename = f"{name}.{ext}"\n        filepath = os.path.join(output_dir, filename)\n\n        print(f"Downloading {name}...")\n        response = requests.get(url)\n        response.raise_for_status()\n\n        with open(filepath, "wb") as f:\n            f.write(response.content)\n        print(f"  Saved to {filepath}")\n\n\ndef main():\n    """Execute the complete view export workflow."""\n    views = [\n        create_patient_view(),\n        create_condition_view(),\n    ]\n\n    print(f"Starting view export for {len(views)} views...")\n    status_url = kick_off_export(views, output_format="ndjson")\n\n    manifest = poll_status(status_url)\n    print(f"Manifest: {manifest}")\n\n    download_files(manifest, OUTPUT_DIR)\n    print("Export complete!")\n\n\nif __name__ == "__main__":\n    main()\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);