"use strict";(self.webpackChunkpathling_site=self.webpackChunkpathling_site||[]).push([[837],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=n.createContext({}),l=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(r),h=a,d=m["".concat(p,".").concat(h)]||m[h]||u[h]||o;return r?n.createElement(d,i(i({ref:t},c),{},{components:r})):n.createElement(d,i({ref:t},c))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[m]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},9765:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var n=r(7462),a=(r(7294),r(3905));const o={sidebar_position:1,description:"The import operation allows FHIR data to be imported into the server, making it available for query via other operations such as search, aggregate and extract."},i="Import",s={unversionedId:"server/operations/import",id:"server/operations/import",title:"Import",description:"The import operation allows FHIR data to be imported into the server, making it available for query via other operations such as search, aggregate and extract.",source:"@site/docs/server/operations/import.md",sourceDirName:"server/operations",slug:"/server/operations/import",permalink:"/docs/server/operations/import",draft:!1,editUrl:"https://github.com/aehrc/pathling/tree/main/site/docs/server/operations/import.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"The import operation allows FHIR data to be imported into the server, making it available for query via other operations such as search, aggregate and extract."},sidebar:"server",previous:{title:"Getting started",permalink:"/docs/server/getting-started"},next:{title:"Search",permalink:"/docs/server/operations/search"}},p={},l=[{value:"Request",id:"request",level:2},{value:"Response",id:"response",level:2},{value:"Examples",id:"examples",level:2}],c={toc:l},m="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(m,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"import"},"Import"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://pathling.csiro.au/fhir/OperationDefinition/import-7"},"FHIR OperationDefinition")),(0,a.kt)("p",null,"This operation allows FHIR R4 data to be imported into the server, making it\navailable for query via other operations such\nas ",(0,a.kt)("a",{parentName:"p",href:"./search"},"search"),", ",(0,a.kt)("a",{parentName:"p",href:"./aggregate"},"aggregate")," and ",(0,a.kt)("a",{parentName:"p",href:"./extract"},"extract"),". Links\nto retrieve that data are provided rather that sending the data inline within\nthe request itself. This is to allow for large data sets to be imported\nefficiently."),(0,a.kt)("p",null,"Source formats currently supported are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://hl7.org/fhir/R4/nd-json.html"},"NDJSON")," format"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://parquet.apache.org/"},"Parquet")," conforming to\nthe ",(0,a.kt)("a",{parentName:"li",href:"../../libraries/encoders/schema"},"Pathling schema")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://delta.io/"},"Delta Lake")," conforming to\nthe ",(0,a.kt)("a",{parentName:"li",href:"../../libraries/encoders/schema"},"Pathling schema"))),(0,a.kt)("p",null,"Currently Pathling supports retrieval of NDJSON files from\n",(0,a.kt)("a",{parentName:"p",href:"https://aws.amazon.com/s3/"},"Amazon S3")," (",(0,a.kt)("inlineCode",{parentName:"p"},"s3://"),"),\n",(0,a.kt)("a",{parentName:"p",href:"https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html"},"HDFS")," (",(0,a.kt)("inlineCode",{parentName:"p"},"hdfs://"),") and\nfilesystem (",(0,a.kt)("inlineCode",{parentName:"p"},"file://"),") URLs. Authentication is supported for S3, see\n",(0,a.kt)("a",{parentName:"p",href:"../configuration"},"Configuration")," for details."),(0,a.kt)("p",null,"Import sources must be explicitly whitelisted within the configuration, for\nsecurity reasons. See the ",(0,a.kt)("a",{parentName:"p",href:"../configuration#import"},"Import")," section of the\nconfiguration documentation for details."),(0,a.kt)("p",null,"There are a number of configuration values that affect the encoding of resources\nimported by this operation, see the ",(0,a.kt)("a",{parentName:"p",href:"../configuration#encoding"},"Encoding"),"\nsection of the configuration documentation for details."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"import")," operation supports the ",(0,a.kt)("a",{parentName:"p",href:"../async"},"Asynchronous Request Pattern"),",\nwhich allows you to kick off a long-running request and check on its progress\nusing a status endpoint.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"POST [FHIR endpoint]/$import\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Import",src:r(7157).Z+"#light-mode-only",title:"Import",width:"668",height:"447"}),"\n",(0,a.kt)("img",{alt:"Import",src:r(3719).Z+"#dark-mode-only",title:"Import",width:"668",height:"447"})),(0,a.kt)("h2",{id:"request"},"Request"),(0,a.kt)("p",null,"The request for the ",(0,a.kt)("inlineCode",{parentName:"p"},"$import")," operation is a\n",(0,a.kt)("a",{parentName:"p",href:"https://hl7.org/fhir/R4/parameters.html"},"Parameters")," resource containing the\nfollowing parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"source [1..*]")," - A source FHIR NDJSON file containing resources to be\nincluded within this import operation. Each file must contain only one type of\nresource.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"resourceType [1..1] (code)")," - The base FHIR resource type contained\nwithin this source file. Code must be a member of\n",(0,a.kt)("a",{parentName:"li",href:"http://hl7.org/fhir/ValueSet/resource-types"},"http://hl7.org/fhir/ValueSet/resource-types"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"url [1..1] (uri)")," - A URL that can be used to retrieve this source file."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"mode [0..1] (code)")," - A value of ",(0,a.kt)("inlineCode",{parentName:"li"},"overwrite")," will cause all existing\nresources of the specified type to be deleted and replaced with the\ncontents of the source file. A value of ",(0,a.kt)("inlineCode",{parentName:"li"},"merge")," will match existing\nresources with updated resources in the source file based on their ID, and\neither update the existing resources or add new resources as appropriate.\nThe default value is ",(0,a.kt)("inlineCode",{parentName:"li"},"overwrite"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"format [0..1] (code)")," - Indicates the format of the source file.\nPossible values are ",(0,a.kt)("inlineCode",{parentName:"li"},"ndjson"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"parquet")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"delta"),". The default value\nis ",(0,a.kt)("inlineCode",{parentName:"li"},"ndjson"),".")))),(0,a.kt)("h2",{id:"response"},"Response"),(0,a.kt)("p",null,"The response from the ",(0,a.kt)("inlineCode",{parentName:"p"},"$import")," operation is an\n",(0,a.kt)("a",{parentName:"p",href:"https://hl7.org/fhir/R4/operationoutcome.html"},"OperationOutcome")," resource,\nwhich will indicate success or a description of any errors that occurred."),(0,a.kt)("h2",{id:"examples"},"Examples"),(0,a.kt)("p",null,"Check out example ",(0,a.kt)("inlineCode",{parentName:"p"},"import")," requests in the Postman collection:"),(0,a.kt)("a",{class:"postman-link",href:"https://documenter.getpostman.com/view/634774/UVsQs48s#72ee4a60-e701-4d1a-af58-85a762301b6c"},(0,a.kt)("img",{src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"})))}u.isMDXComponent=!0},3719:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/import-dark-f1b11a37d56167f25f32a90696b5aa4b.svg"},7157:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/import-5a4d2087390fb6affe494bc66b4d08bc.svg"}}]);